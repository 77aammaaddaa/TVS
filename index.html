<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechnoVision - حلول متكاملة لنمو أعمالك (إصدار 2.4)</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome CDN for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /*
        * ملاحظة هامة: في بيئة الإنتاج، يُفضل نقل هذه الأكواد إلى ملف CSS خارجي (مثل assets/css/custom.css)
        * لتحسين أداء تحميل الصفحة واستغلال التخزين المؤقت للمتصفح.
        */

        /* Custom Tailwind Colors based on brand identity */
        :root {
            --color-primary-dark: #2a2a32; /* Dark Gray from logo */
            --color-primary-accent: #fcbf01; /* Yellow from logo */
            --color-secondary-dark: #1f2937; /* Slightly lighter than primary-dark for contrast */
            --color-text-light: #f3f4f6; /* Gray-100 for light text */
            --color-text-dark: #1f2937; /* Dark text for light backgrounds */
        }

        /* Override Tailwind defaults for primary colors */
        .bg-primary-dark { background-color: var(--color-primary-dark); }
        .text-primary-dark { color: var(--color-primary-dark); }
        .hover\:bg-primary-dark-hover:hover { background-color: #1a1a1a; } /* Slightly darker hover */

        .bg-primary-accent { background-color: var(--color-primary-accent); }
        .text-primary-accent { color: var(--color-primary-accent); }
        .hover\:bg-primary-accent-hover:hover { background-color: #e6b000; } /* Slightly darker yellow hover */

        .border-primary-accent { border-color: var(--color-primary-accent); }

        /* General Body Styling - استخدام خط Inter أو بديل له */
        body {
            font-family: 'Inter', sans-serif;
            direction: rtl;
            text-align: right;
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* Prevent horizontal scrolling */
            background-color: #f8f9fa; /* لون خلفية فاتح للموقع ككل */
            color: var(--color-text-dark);
        }

        /* All page sections are now displayed by default in the SPA model */
        .page-content {
            display: none; /* مخفي افتراضياً */
            scroll-margin-top: 80px; /* Offset for fixed navbar when scrolling to an anchor */
        }

        .page-content.active {
            display: block; /* يُظهر القسم النشط */
        }

        /* Modal specific styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100; /* أعلى من Sidebar Cart */
            padding: 1rem;
        }

        .modal-content {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            padding: 1.5rem 2rem;
            width: 100%;
            max-width: 32rem; /* max-w-lg */
            position: relative;
            animation: fadeInUp 0.3s ease-out forwards;
            overflow-y: auto;
            max-height: 90vh;
        }

        /* Accordion styles for services details */
        .accordion-item {
            border-bottom: 1px solid #e5e7eb; /* gray-200 */
        }
        .accordion-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            cursor: pointer;
            font-size: 1.25rem; /* text-xl */
            font-weight: bold;
            color: var(--color-primary-dark);
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            padding-bottom: 0;
        }
        .accordion-content.active {
            max-height: 500px; /* Adjust as needed - قيمة كبيرة لضمان عرض المحتوى بالكامل */
            padding-bottom: 1rem;
        }
        .accordion-header .icon {
            transition: transform 0.3s ease-out;
        }
        .accordion-header .icon.rotate {
            transform: rotate(180deg);
        }

        /* Sidebar Cart Styles */
        .sidebar-cart {
            position: fixed;
            top: 0;
            right: -400px; /* Hidden by default - عرض أكبر للسلة */
            width: 400px; /* Adjusted width */
            max-width: 95%; /* لضمان التجاوب على الشاشات الصغيرة جداً */
            height: 100%;
            background-color: white;
            box-shadow: -4px 0 10px rgba(0, 0, 0, 0.2);
            z-index: 90; /* أقل من المودال، أعلى من المحتوى */
            transition: right 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
            padding: 1.5rem;
        }
        .sidebar-cart.open {
            right: 0;
        }
        .sidebar-cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 85; /* بين المودال والسلة */
            display: none;
        }
        .sidebar-cart-overlay.open {
            display: block;
        }

        /* محتوى السلة داخل الشريط الجانبي */
        .sidebar-cart-content {
            flex-grow: 1;
            overflow-y: auto; /* للسماح بالتمرير إذا كانت العناصر كثيرة */
            padding-right: 10px; /* مسافة داخلية لعدم التصاق المحتوى بالحافة */
        }
        /* لتجميل شريط التمرير */
        .sidebar-cart-content::-webkit-scrollbar {
            width: 8px;
        }
        .sidebar-cart-content::-webkit-scrollbar-thumb {
            background-color: var(--color-primary-accent);
            border-radius: 4px;
        }
        .sidebar-cart-content::-webkit-scrollbar-track {
            background-color: #f1f1f1;
        }

        .sidebar-cart-footer {
            padding-top: 1rem;
            border-top: 1px solid #e5e7eb;
            flex-shrink: 0; /* لمنع الفوتير من الانكماش */
        }

        /* CSS for custom alert messages */
        @keyframes fadeOutDown {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(20px); }
        }
        .animate-fade-out-down { animation: fadeOutDown 0.5s ease-in forwards; }

        /* تعديلات على تخطيط صفحة بناء الباقة عند فتح السلة */
        @media (min-width: 1024px) { /* lg breakpoint */
            .package-builder-layout {
                display: grid;
                grid-template-columns: 1fr 3fr; /* Sidebar for filters, Products for 3 parts */
                gap: 2rem;
            }
            .lg\:col-span-1-filters { /* Custom class for filter sidebar */
                grid-column: 1 / 2;
            }
            .lg\:col-span-3-products { /* Custom class for products grid */
                grid-column: 2 / 5;
                transition: margin-right 0.3s ease-in-out; /* تغيير الهامش الأيمن بدل الأيسر للغة العربية */
            }
            body.cart-open .lg\:col-span-3-products {
                margin-right: 400px; /* Push content when cart is open */
            }
        }
    </style>
</head>
<body class="font-sans text-right" dir="rtl">

    <!-- Navbar -->
    <nav class="bg-primary-dark text-white p-4 shadow-lg fixed w-full z-50 transition-all duration-300">
        <div class="container mx-auto flex justify-between items-center flex-wrap">
            <!-- Company Name and Slogan with Logo -->
            <div class="flex items-center space-x-3 cursor-pointer" onclick="navigate('home-page')">
                <!-- [Image of TechnoVision Solutions Logo] -->
                <img src="https://placehold.co/80x40/2a2a32/fcbf01?text=TVS" alt="TechnoVision Solutions Logo" class="h-10 w-auto rounded-md" />
                <div class="flex flex-col">
                    <span class="font-extrabold text-2xl tracking-tight text-primary-accent">TechnoVision</span>
                    <span class="text-sm font-light opacity-80 hidden md:block">نقود النمو الرقمي لعملائنا بحلول متكاملة.</span>
                </div>
            </div>

            <!-- Mobile Menu Button -->
            <button
                class="md:hidden text-white focus:outline-none"
                id="mobile-menu-button"
                aria-label="Toggle navigation"
            >
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path id="menu-icon-open" style="display: block;" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                    <path id="menu-icon-close" style="display: none;" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>

            <!-- Navigation Links -->
            <div class="w-full md:flex md:items-center md:w-auto mt-4 md:mt-0 hidden" id="navbar-links">
                <ul class="flex flex-col md:flex-row md:space-x-8 text-lg font-medium">
                    <li><a href="#home-page" onclick="navigate('home-page')" class="block py-2 px-3 rounded hover:bg-secondary-dark transition duration-300">الرئيسية</a></li>
                    <li><a href="#about-us-section" onclick="navigate('about-us-section')" class="block py-2 px-3 rounded hover:bg-secondary-dark transition duration-300">من نحن</a></li>
                    <li><a href="#services-page" onclick="navigate('services-page')" class="block py-2 px-3 rounded hover:bg-secondary-dark transition duration-300">خدماتنا</a></li>
                    <li><a href="#package-builder-page" onclick="navigate('package-builder-page')" class="block py-2 px-3 rounded hover:bg-secondary-dark transition duration-300">بناء باقتك</a></li>
                    <li><a href="#portfolio-page" onclick="navigate('portfolio-page')" class="block py-2 px-3 rounded hover:bg-secondary-dark transition duration-300">عملاؤنا وقصص النجاح</a></li>
                    <li><a href="#ai-content-editing-page" onclick="navigate('ai-content-editing-page')" class="block py-2 px-3 rounded hover:bg-secondary-dark transition duration-300">حلول الذكاء الاصطناعي</a></li>
                    <li><a href="#contact-page" onclick="navigate('contact-page')" class="block py-2 px-3 rounded hover:bg-secondary-dark transition duration-300">اتصل بنا</a></li>
                    <li>
                        <button
                            onclick="showContactFormModal()"
                            class="mt-2 md:mt-0 bg-primary-accent text-primary-dark font-bold py-2 px-5 rounded-full shadow-lg hover:bg-primary-accent-hover transition duration-300 transform hover:scale-105"
                        >
                            اطلب استشارة مجانية
                        </button>
                    </li>
                    <li>
                        <!-- Cart Icon for sidebar cart -->
                        <button onclick="toggleSidebarCart()" class="text-white relative mr-4"> <!-- تم تغيير ml-4 إلى mr-4 للغة العربية -->
                            <i class="fas fa-shopping-cart text-2xl"></i>
                            <span id="cart-item-count" class="absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content Area - All sections are now displayed consecutively -->
    <div id="main-content-wrapper">
        <!-- Home Page -->
        <div id="home-page" class="page-content active pt-20">
            <!-- Hero Section -->
            <section class="relative h-[60vh] md:h-[80vh] flex items-center justify-center text-white text-center bg-cover bg-center" style="background-image: url(https://placehold.co/1920x1080/2a2a32/fcbf01?text=TechnoVision+Digital+Growth)">
                <div class="absolute inset-0 bg-black opacity-60"></div>
                <div class="relative z-10 p-6 max-w-4xl mx-auto">
                    <h1 class="text-4xl md:text-6xl font-extrabold leading-tight animate-fade-in-down">
                        نقود النمو الرقمي لعلامتك التجارية
                    </h1>
                    <p class="mt-4 text-lg md:text-2xl font-light opacity-90 animate-fade-in-up">
                        حلول متكاملة ومدعومة بالذكاء الاصطناعي لنتائج لا مثيل لها.
                    </p>
                    <button
                        onclick="navigate('package-builder-page')"
                        class="mt-8 bg-primary-accent text-primary-dark font-bold py-3 px-8 rounded-full shadow-lg hover:bg-primary-accent-hover transition duration-300 transform hover:scale-105 animate-bounce-in"
                    >
                        كون باقتك الآن
                    </button>
                </div>
            </section>

            <!-- Services Overview (from homepage_ai_marketing_agency.html) -->
            <section class="py-16 bg-gray-50">
                <div class="container mx-auto px-4 text-center">
                    <h2 class="text-3xl md:text-4xl font-extrabold text-primary-dark mb-10">خدماتنا الشاملة</h2>
                    <p class="text-lg md:text-xl text-gray-700 mb-8">نجمع بين الإبداع البشري ودقة الذكاء الاصطناعي لنقدم لك حلول تسويقية متكاملة ومبتكرة.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <!-- Service Card 1: Digital Marketing -->
                        <div class="bg-white rounded-lg shadow-lg p-6 transform transition duration-300 hover:scale-105 hover:shadow-xl border-t-4 border-primary-accent">
                            <div class="text-primary-accent mb-4 text-5xl">
                                <i class="fas fa-bullhorn"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">التسويق الرقمي المتكامل</h3>
                            <p class="text-gray-600">نقدم استراتيجيات وحملات تسويقية شاملة لتعزيز حضورك الرقمي وزيادة مبيعاتك.</p>
                        </div>
                        <!-- Service Card 2: Business Development -->
                        <div class="bg-white rounded-lg shadow-lg p-6 transform transition duration-300 hover:scale-105 hover:shadow-xl border-t-4 border-primary-dark">
                            <div class="text-primary-dark mb-4 text-5xl">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">تطوير الأعمال والاستشارات</h3>
                            <p class="text-gray-600">نساعدك على تحليل السوق، تحديد فرص النمو، ووضع خطط التوسع لعملك.</p>
                        </div>
                        <!-- Service Card 3: Accounting & Financial -->
                        <div class="bg-white rounded-lg shadow-lg p-6 transform transition duration-300 hover:scale-105 hover:shadow-xl border-t-4 border-yellow-600">
                            <div class="text-yellow-600 mb-4 text-5xl">
                                <i class="fas fa-calculator"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">خدمات محاسبية ومالية</h3>
                            <p class="text-gray-600">نضمن الامتثال المالي ونقدم استشارات لتحسين الأداء المالي لشركتك.</p>
                        </div>
                        <!-- Service Card 4: Legal Services -->
                        <div class="bg-white rounded-lg shadow-lg p-6 transform transition duration-300 hover:scale-105 hover:shadow-xl border-t-4 border-gray-600">
                            <div class="text-gray-600 mb-4 text-5xl">
                                <i class="fas fa-gavel"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">استشارات وخدمات قانونية</h3>
                            <p class="text-gray-600">نوفر الدعم القانوني اللازم لصياغة العقود وتسجيل الشركات والعلامات التجارية.</p>
                        </div>
                         <!-- Service Card 5: Technical Solutions -->
                         <div class="bg-white rounded-lg shadow-lg p-6 transform transition duration-300 hover:scale-105 hover:shadow-xl border-t-4 border-orange-500">
                            <div class="text-orange-500 mb-4 text-5xl">
                                <i class="fas fa-code"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">حلول تقنية ودعم فني</h3>
                            <p class="text-gray-600">نقدم حلول تطوير الويب والتطبيقات، دعم البنية التحتية، وأمن المعلومات.</p>
                        </div>
                         <!-- Service Card 6: AI R&D -->
                         <div class="bg-white rounded-lg shadow-lg p-6 transform transition duration-300 hover:scale-105 hover:shadow-xl border-t-4 border-purple-600">
                            <div class="text-purple-600 mb-4 text-5xl">
                                <i class="fas fa-robot"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">البحث والتطوير بالذكاء الاصطناعي</h3>
                            <p class="text-gray-600">نطبق أحدث تقنيات الذكاء الاصطناعي لتحسين خدماتنا وتقديم حلول متقدمة.</p>
                        </div>
                    </div>
                    <a href="#services-page" onclick="navigate('services-page')"
                        class="mt-12 bg-primary-dark text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-secondary-dark transition duration-300 transform hover:scale-105 inline-block"
                    >
                        استكشف جميع خدماتنا
                    </a>
                </div>
            </section>

            <!-- Why Choose Us Section -->
            <section class="py-16 bg-primary-dark text-white">
                <div class="container mx-auto px-4 text-center">
                    <h2 class="text-3xl md:text-4xl font-extrabold mb-10">لماذا تختار TechnoVision؟</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- USP 1 -->
                        <div class="bg-secondary-dark rounded-lg p-6 shadow-xl flex flex-col items-center transform transition duration-300 hover:scale-105">
                            <div class="text-primary-accent mb-4 text-5xl">
                                <i class="fas fa-cubes"></i> <!-- Integrated Model icon -->
                            </div>
                            <h3 class="text-xl font-bold mb-3">النموذج المتكامل للخدمات</h3>
                            <p class="text-gray-200">حلول شاملة تتجاوز التسويق لتشمل جوانب حيوية أخرى للأعمال.</p>
                        </div>
                        <!-- USP 2 -->
                        <div class="bg-secondary-dark rounded-lg p-6 shadow-xl flex flex-col items-center transform transition duration-300 hover:scale-105">
                            <div class="text-primary-accent mb-4 text-5xl">
                                <i class="fas fa-cogs"></i> <!-- Flexibility icon -->
                            </div>
                            <h3 class="text-xl font-bold mb-3">المرونة في تقديم الخدمات</h3>
                            <p class="text-gray-200">يمكنك تكوين حزم خدمات مخصصة تناسب احتياجاتك وميزانيتك.</p>
                        </div>
                        <!-- USP 3 -->
                        <div class="bg-secondary-dark rounded-lg p-6 shadow-xl flex flex-col items-center transform transition duration-300 hover:scale-105">
                            <div class="text-primary-accent mb-4 text-5xl">
                                <i class="fas fa-home"></i> <!-- Remote-first icon -->
                            </div>
                            <h3 class="text-xl font-bold mb-3">نموذج العمل عن بعد (Remote-first)</h3>
                            <p class="text-gray-200">يسمح بالوصول إلى أفضل الكفاءات ويوفر مرونة للعملاء.</p>
                        </div>
                        <!-- USP 4 -->
                        <div class="bg-secondary-dark rounded-lg p-6 shadow-xl flex flex-col items-center transform transition duration-300 hover:scale-105">
                            <div class="text-primary-accent mb-4 text-5xl">
                                <i class="fas fa-hand-holding-usd"></i> <!-- ROI focus icon -->
                            </div>
                            <h3 class="text-xl font-bold mb-3">التركيز على النتائج والعائد على الاستثمار</h3>
                            <p class="text-gray-200">نلتزم بتحقيق نقطة التعادل وضمان الربحية لعملائنا.</p>
                        </div>
                        <!-- USP 5 -->
                        <div class="bg-secondary-dark rounded-lg p-6 shadow-xl flex flex-col items-center transform transition duration-300 hover:scale-105">
                            <div class="text-primary-accent mb-4 text-5xl">
                                <i class="fas fa-lightbulb"></i> <!-- AI R&D icon -->
                            </div>
                            <h3 class="text-xl font-bold mb-3">الاستثمار في البحث والتطوير بالذكاء الاصطناعي</h3>
                            <p class="text-gray-200">تقديم حلول مبتكرة ومتقدمة تكنولوجياً لتميز أعمالك.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Final Call to Action Section (Repeated for visibility) -->
            <section class="py-16 bg-primary-dark text-white text-center">
                <div class="container mx-auto px-4">
                    <h2 class="text-3xl md:text-4xl font-extrabold mb-6">هل أنت مستعد لدفع نموك الرقمي؟</h2>
                    <p class="text-lg md:text-xl mb-8 opacity-90">دعنا نساعدك في تحقيق أهدافك الرقمية. اتصل بنا اليوم!</p>
                    <button
                        onclick="showContactFormModal()"
                        class="bg-primary-accent text-primary-dark font-bold py-3 px-8 rounded-full shadow-lg hover:bg-primary-accent-hover transition duration-300 transform hover:scale-105 animate-bounce-in"
                    >
                        اطلب استشارة مجانية
                    </button>
                </div>
            </section>
        </div>

        <!-- About Us Page & Our Team -->
        <div id="about-us-section" class="page-content pt-24 pb-12 bg-gray-50">
            <div class="container mx-auto px-4">
                <h1 class="text-4xl md:text-5xl font-extrabold text-primary-dark text-center mb-12">من نحن - قصتنا، رؤيتنا، وفريقنا المصري</h1>

                <!-- Our Story -->
                <section class="bg-white rounded-lg shadow-lg p-6 md:p-8 mb-10 border-r-8 border-primary-accent animate-fade-in">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4 text-right">قصتنا</h2>
                    <p class="text-gray-700 leading-relaxed text-right">
                        تأسست شركة TechnoVision على أرض مصر لتقديم حلول متكاملة للشركات الناشئة والصغيرة والمتوسطة (SMEs) في السوق المصري العريق. هدفنا الأساسي هو تمكين هذه الشركات من تحقيق النمو المستدام والتحول الرقمي الشامل، متجاوزين مجرد خدمات التسويق الإلكتروني لنشمل تطوير الأعمال، الخدمات المحاسبية والقانونية، والحلول التقنية المبتكرة، مع التركيز على التكامل الفعال بين جميع أقسام المؤسسة لضمان أقصى فعالية.
                    </p>
                    <p class="text-gray-700 leading-relaxed text-right mt-4">
                        منذ بدايتنا، التزمنا بمساعدة الشركات المصرية من جميع الأحجام على تحقيق أقصى إمكاناتها الرقمية، من خلال استراتيجيات مخصصة ونتائج قابلة للقياس، وبنموذج عمل عن بعد يضمن المرونة والوصول لأفضل الكفاءات المصرية والعالمية.
                    </p>
                </section>

                <!-- Vision, Mission, Values -->
                <section class="bg-white rounded-lg shadow-lg p-6 md:p-8 mb-10 border-l-8 border-primary-dark animate-fade-in">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-right">رؤيتنا، رسالتنا، وقيمنا الأصيلة</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-right">
                        <div>
                            <h3 class="text-xl font-semibold text-primary-dark mb-2 flex items-center justify-end">
                                <i class="fas fa-eye text-2xl ml-2"></i> رؤيتنا
                            </h3>
                            <p class="text-gray-700">أن نكون الشريك الاستراتيجي المفضل للشركات الناشئة والصغيرة والمتوسطة في مصر والمنطقة، وأن نساهم بقوة في بناء اقتصاد رقمي مصري مزدهر من خلال تقديم خدمات استشارية وتنفيذية رائدة ومتكاملة.</p>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-primary-dark mb-2 flex items-center justify-end">
                                <i class="fas fa-bullseye text-2xl ml-2"></i> رسالتنا
                            </h3>
                            <p class="text-gray-700">تمكين الشركات المصرية الصغيرة والمتوسطة من تحقيق أقصى استفادة من التواجد الرقمي والتكامل المؤسسي من خلال حلول مبتكرة وفعالة في التسويق، تطوير الأعمال، المحاسبة، الجوانب القانونية، والتقنية، بما يضمن نمو أعمالهم وزيادة تنافسيتهم في السوق.</p>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-primary-dark mb-2 flex items-center justify-end">
                                <i class="fas fa-heart text-2xl ml-2"></i> قيمنا
                             </h3>
                            <ul class="list-disc list-inside text-gray-700 space-y-1">
                                <li>الابتكار والشغف</li>
                                <li>الشفافية والثقة</li>
                                <li>التركيز على النتائج</li>
                                <li>التعاون والتطوير المستمر</li>
                                <li>التكامل والشمولية</li>
                                <li>العمل عن بعد بفاعلية</li>
                                <li><span class="font-bold">الأصالة المصرية والجودة العالمية</span></li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Our Team -->
                <section class="bg-white rounded-lg shadow-lg p-6 md:p-8 mb-10 border-r-8 border-primary-accent animate-fade-in">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">فريق عمل TechnoVision - خبراء مصريون في خدمتكم</h2>
                    <p class="text-gray-700 text-center mb-10">
                        فريق من الخبراء المصريين الملتزمين والشغوفين، يجمعون بين الخبرة البشرية العميقة والقدرات المتقدمة للذكاء الاصطناعي لتحقيق أهدافك بأفضل شكل.
                    </p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                        <!-- Team Member 1 -->
                        <!-- [Image of أحمد] -->
                        <div class="flex flex-col items-center text-center">
                            <img src="https://placehold.co/150x150/fcbf01/2a2a32?text=أحمد" alt="أحمد حسام" class="w-36 h-36 rounded-full object-cover mb-4 shadow-lg border-4 border-primary-accent"/>
                            <h3 class="text-xl font-bold text-gray-800">أحمد حسام</h3>
                            <p class="text-primary-dark font-semibold">الرئيس التنفيذي</p>
                            <p class="text-gray-600 text-sm mt-2">خبير استراتيجيات النمو الرقمي ودمج الذكاء الاصطناعي في السوق المصري.</p>
                        </div>
                        <!-- Team Member 2 -->
                        <div class="flex flex-col items-center text-center">
                            <!-- [Image of مريم] -->
                            <img src="https://placehold.co/150x150/2a2a32/fcbf01?text=مريم" alt="مريم سعيد" class="w-36 h-36 rounded-full object-cover mb-4 shadow-lg border-4 border-primary-dark"/>
                            <h3 class="text-xl font-bold text-gray-800">مريم سعيد</h3>
                            <p class="text-primary-accent font-semibold">مديرة التسويق الرقمي</p>
                            <p class="text-gray-600 text-sm mt-2">متخصصة في بناء الحملات الناجحة وقيادة فرق العمل التسويقية.</p>
                        </div>
                        <!-- Team Member 3 -->
                        <div class="flex flex-col items-center text-center">
                            <!-- [Image of محمود] -->
                            <img src="https://placehold.co/150x150/fcbf01/2a2a32?text=محمود" alt="محمود علي" class="w-36 h-36 rounded-full object-cover mb-4 shadow-lg border-4 border-primary-accent"/>
                            <h3 class="text-xl font-bold text-gray-800">محمود علي</h3>
                            <p class="text-primary-dark font-semibold">مدير المحتوى والذكاء الاصطناعي</p>
                            <p class="text-gray-600 text-sm mt-2">خبير في توليد وتحسين المحتوى المدعوم بالذكاء الاصطناعي باللغة العربية.</p>
                        </div>
                        <!-- Team Member 4 -->
                        <div class="flex flex-col items-center text-center">
                            <!-- [Image of فاطمة] -->
                            <img src="https://placehold.co/150x150/2a2a32/fcbf01?text=فاطمة" alt="فاطمة الزهراء" class="w-36 h-36 rounded-full object-cover mb-4 shadow-lg border-4 border-primary-dark"/>
                            <h3 class="text-xl font-bold text-gray-800">فاطمة الزهراء</h3>
                            <p class="text-primary-accent font-semibold">مديرة تطوير الأعمال</p>
                            <p class="text-gray-600 text-sm mt-2">متخصصة في تحليل السوق وتطوير استراتيجيات التوسع للمشاريع المصرية.</p>
                        </div>
                    </div>
                </section>

                <!-- Call to Action -->
                <section class="py-10 bg-primary-dark text-white text-center rounded-lg mt-10 shadow-xl">
                    <h2 class="text-3xl font-extrabold mb-4">هل لديك مشروع في ذهنك؟</h2>
                    <p class="text-lg mb-6 opacity-90">دع فريقنا المصري المحترف يساعدك على تحويل رؤيتك إلى واقع ملموس.</p>
                    <button
                        onclick="showContactFormModal()"
                        class="bg-primary-accent text-primary-dark font-bold py-3 px-8 rounded-full shadow-lg hover:bg-primary-accent-hover transition duration-300 transform hover:scale-105"
                    >
                        تواصل معنا اليوم
                    </button>
                </section>
            </div>
        </div>

        <!-- Services Page -->
        <div id="services-page" class="page-content pt-24 pb-12 bg-gray-50">
            <div class="container mx-auto px-4">
                <h1 class="text-4xl md:text-5xl font-extrabold text-primary-dark text-center mb-12">خدماتنا الشاملة - طريقك نحو النجاح</h1>

                <!-- Service 1: Digital Marketing Services -->
                <section class="bg-white rounded-lg shadow-lg p-6 md:p-8 mb-10 border-r-8 border-primary-accent animate-fade-in">
                    <div class="flex flex-col md:flex-row items-center md:space-x-8 text-right">
                        <div class="md:w-1/4 text-primary-accent text-7xl mb-4 md:mb-0 transform hover:scale-110 transition duration-300">
                            <i class="fas fa-bullhorn"></i>
                        </div>
                        <div class="md:w-3/4">
                            <h2 class="text-3xl font-bold text-gray-800 mb-4">خدمات التسويق الرقمي</h2>
                            <p class="text-gray-700 mb-4">
                                نقوم بصياغة استراتيجيات تسويقية فعالة وإدارة حملات إعلانية احترافية لزيادة وصولك وتأثيرك في السوق الرقمي المصري.
                            </p>
                            <!-- Accordion for detailed info -->
                            <div class="accordion-item">
                                <div class="accordion-header" onclick="toggleAccordion(this)">
                                    <span>تفاصيل أكثر <i class="fas fa-chevron-down icon mr-2"></i></span>
                                </div>
                                <div class="accordion-content">
                                    <ul class="list-disc list-inside text-gray-600 mb-4 space-y-1">
                                        <li>**صناعة المحتوى:** نصي ومرئي لحسابات التواصل الاجتماعي (فيسبوك، انستجرام، تيك توك) مصمم خصيصًا للجمهور المصري.</li>
                                        <li>**إنشاء وتطوير الويب:** تصميم وتطوير المتاجر الإلكترونية والمواقع الاحترافية المتكاملة مع أنظمة الدفع المصرية.</li>
                                        <li>**إدارة الحملات الإعلانية الممولة:** إدارة حملات إعلانية فعالة على Google Ads, Meta Ads, TikTok Ads باستهداف دقيق للسوق المصري.</li>
                                        <li>**إدارة حسابات التواصل الاجتماعي:** نشر، تفاعل، وردود سريعة باللغة واللهجة المصرية لتعزيز التفاعل.</li>
                                        <li>**تحسين محركات البحث (SEO):** استراتيجيات SEO قوية ومحتوى محسّن لزيادة الظهور في نتائج البحث المحلية والعربية.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Service 2: Business Development Services -->
                <section class="bg-white rounded-lg shadow-lg p-6 md:p-8 mb-10 border-l-8 border-primary-dark animate-fade-in">
                    <div class="flex flex-col md:flex-row-reverse items-center md:space-x-reverse md:space-x-8 text-right">
                        <div class="md:w-1/4 text-primary-dark text-7xl mb-4 md:mb-0 transform hover:scale-110 transition duration-300">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <div class="md:w-3/4">
                            <h2 class="text-3xl font-bold text-gray-800 mb-4">خدمات تطوير الأعمال</h2>
                            <p class="text-gray-700 mb-4">
                                نقدم استشارات استراتيجية تساعدك على فهم السوق المصري، تحديد الفرص الجديدة، ووضع خطط نمو فعالة لأعمالك.
                            </p>
                            <!-- Accordion for detailed info -->
                            <div class="accordion-item">
                                <div class="accordion-header" onclick="toggleAccordion(this)">
                                    <span>تفاصيل أكثر <i class="fas fa-chevron-down icon mr-2"></i></span>
                                </div>
                                <div class="accordion-content">
                                    <ul class="list-disc list-inside text-gray-600 mb-4 space-y-1">
                                        <li>**دراسات الجدوى:** تحليل شامل للسوق المصري وتقييم الجدوى الاقتصادية لمشروعك.</li>
                                        <li>**خطط النمو والتوسع:** وضع استراتيجيات واضحة للتوسع داخل مصر أو في المنطقة.</li>
                                        <li>**استشارات استراتيجية:** توجيهات متخصصة لتحسين الأداء وتحديد الميزات التنافسية.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Service 3: Accounting & Financial Services -->
                <section class="bg-white rounded-lg shadow-lg p-6 md:p-8 mb-10 border-r-8 border-primary-accent animate-fade-in">
                    <div class="flex flex-col md:flex-row items-center md:space-x-8 text-right">
                        <div class="md:w-1/4 text-primary-accent mb-4 text-5xl">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <div class="md:w-3/4">
                            <h2 class="text-3xl font-bold text-gray-800 mb-4">خدمات محاسبية ومالية</h2>
                            <p class="text-gray-700 mb-4">
                                نساعدك في إدارة الجوانب المالية لشركتك بفعالية، من إعداد التقارير إلى الاستشارات الضريبية، لضمان الامتثال وتحسين الأداء المالي وفقًا للقوانين المصرية.
                            </p>
                            <!-- Accordion for detailed info -->
                            <div class="accordion-item">
                                <div class="accordion-header" onclick="toggleAccordion(this)">
                                    <span>تفاصيل أكثر <i class="fas fa-chevron-down icon mr-2"></i></span>
                                </div>
                                <div class="accordion-content">
                                    <ul class="list-disc list-inside text-gray-600 mb-4 space-y-1">
                                        <li>**إعداد التقارير المالية:** إعداد الميزانيات، قوائم الدخل، والتدفقات النقدية الدورية.</li>
                                        <li>**إدارة الدفاتر المحاسبية:** تنظيم وتوثيق جميع المعاملات المالية لضمان الشفافية والدقة.</li>
                                        <li>**استشارات ضريبية ومالية:** توجيهات حول الامتثال الضريبي والاستفادة القصوى من المزايا المالية في مصر.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Service 4: Legal Services -->
                <section class="bg-white rounded-lg shadow-lg p-6 md:p-8 mb-10 border-l-8 border-primary-dark animate-fade-in">
                    <div class="flex flex-col md:flex-row-reverse items-center md:space-x-reverse md:space-x-8 text-right">
                        <div class="md:w-1/4 text-primary-dark text-7xl mb-4 md:mb-0 transform hover:scale-110 transition duration-300">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <div class="md:w-3/4">
                            <h2 class="text-3xl font-bold text-gray-800 mb-4">خدمات قانونية</h2>
                            <p class="text-gray-700 mb-4">
                                نوفر الدعم القانوني لشركتك، بدءاً من صياغة العقود وحتى تسجيل الشركات والعلامات التجارية، لضمان الامتثال وحماية أعمالك في البيئة القانونية المصرية.
                            </p>
                            <!-- Accordion for detailed info -->
                            <div class="accordion-item">
                                <div class="accordion-header" onclick="toggleAccordion(this)">
                                    <span>تفاصيل أكثر <i class="fas fa-chevron-down icon mr-2"></i></span>
                                </div>
                                <div class="accordion-content">
                                    <ul class="list-disc list-inside text-gray-600 mb-4 space-y-1">
                                        <li>**صياغة العقود والاتفاقيات:** إعداد ومراجعة العقود بما يتوافق مع القوانين المصرية.</li>
                                        <li>**استشارات قانونية:** توجيهات للشركات الناشئة والصغيرة والمتوسطة حول الإطار القانوني لعملياتهم.</li>
                                        <li>**تسجيل الشركات والعلامات التجارية:** مساعدتك في إجراءات تسجيل شركتك وعلامتك التجارية في مصر.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Service 5: Technical Solutions -->
                <section class="bg-white rounded-lg shadow-lg p-6 md:p-8 mb-10 border-r-8 border-primary-accent animate-fade-in">
                    <div class="flex flex-col md:flex-row items-center md:space-x-8 text-right">
                        <div class="md:w-1/4 text-primary-accent mb-4 text-5xl">
                            <i class="fas fa-laptop-code"></i>
                        </div>
                        <div class="md:w-3/4">
                            <h2 class="text-3xl font-bold text-gray-800 mb-4">خدمات تقنية</h2>
                            <p class="text-gray-700 mb-4">
                                نقدم حلولاً تقنية متقدمة تشمل تطوير الويب والتطبيقات، دعم البنية التحتية، وحلول الأمن السيبراني لضمان كفاءة عملياتك الرقمية.
                            </p>
                            <!-- Accordion for detailed info -->
                            <div class="accordion-item">
                                <div class="accordion-header" onclick="toggleAccordion(this)">
                                    <span>تفاصيل أكثر <i class="fas fa-chevron-down icon mr-2"></i></span>
                                </div>
                                <div class="accordion-content">
                                    <ul class="list-disc list-inside text-gray-600 mb-4 space-y-1">
                                        <li>**دعم فني وحلول بنية تحتية:** دعم شامل لأنظمتك التقنية وتوفير حلول بنية تحتية مستقرة.</li>
                                        <li>**تطوير تطبيقات الويب والجوال:** تصميم وتطوير تطبيقات مخصصة لعملك على منصات الويب والجوال.</li>
                                        <li>**حلول الأمن السيبراني:** حماية بياناتك وأنظمتك من التهديدات السيبرانية.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Service 6: AI R&D Services -->
                <section class="bg-white rounded-lg shadow-lg p-6 md:p-8 mb-10 border-l-8 border-primary-dark animate-fade-in">
                    <div class="flex flex-col md:flex-row-reverse items-center md:space-x-reverse md:space-x-8 text-right">
                        <div class="md:w-1/4 text-primary-dark text-7xl mb-4 md:mb-0 transform hover:scale-110 transition duration-300">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="md:w-3/4">
                            <h2 class="text-3xl font-bold text-gray-800 mb-4">خدمات البحث والتطوير بالذكاء الاصطناعي</h2>
                            <p class="text-gray-700 mb-4">
                                قسم متخصص في البحث والتطوير والابتكار باستخدام الذكاء الاصطناعي لتحسين الخدمات وتقديم حلول متقدمة، بما في ذلك تحرير ومراجعة المحتوى.
                            </p>
                            <!-- Accordion for detailed info -->
                            <div class="accordion-item">
                                <div class="accordion-header" onclick="toggleAccordion(this)">
                                    <span>تفاصيل أكثر <i class="fas fa-chevron-down icon mr-2"></i></span>
                                </div>
                                <div class="accordion-content">
                                    <ul class="list-disc list-inside text-gray-600 mb-4 space-y-1">
                                        <li>**تطبيق حلول الذكاء الاصطناعي:** دمج الذكاء الاصطناعي في التسويق وتحليل البيانات لنتائج دقيقة.</li>
                                        <li>**تطوير أدوات مخصصة:** بناء أدوات ذكاء اصطناعي مخصصة تلبي احتياجات عملك الفريدة.</li>
                                        <li>**البحث في أحدث التقنيات:** استكشاف وتطبيق أحدث ابتكارات الذكاء الاصطناعي في الأعمال.</li>
                                    </ul>
                                </div>
                            </div>
                            <a href="#ai-content-editing-page" onclick="navigate('ai-content-editing-page')"
                                class="mt-6 bg-primary-accent text-primary-dark font-bold py-3 px-8 rounded-full shadow-lg hover:bg-primary-accent-hover transition duration-300 transform hover:scale-105 inline-block"
                            >
                                اكتشف المزيد عن حلول الذكاء الاصطناعي
                            </a>
                        </div>
                    </div>
                </section>

                <!-- Call to Action for consultation -->
                <section class="py-10 bg-primary-dark text-white text-center rounded-lg mt-10 shadow-xl">
                    <h2 class="text-3xl font-extrabold mb-4">هل أنت مستعد لدفع نموك الرقمي؟</h2>
                    <p class="text-lg mb-6 opacity-90">تواصل معنا اليوم لمناقشة أهدافك وكيف يمكننا مساعدتك.</p>
                    <button
                        onclick="showContactFormModal()"
                        class="bg-primary-accent text-primary-dark font-bold py-3 px-8 rounded-full shadow-lg hover:bg-primary-accent-hover transition duration-300 transform hover:scale-105"
                    >
                        اطلب استشارة مجانية
                    </button>
                </section>
            </div>
        </div>

        <!-- Package Builder Page (Combines Store and mini-cart) -->
        <div id="package-builder-page" class="page-content pt-24 pb-12 bg-gray-50">
            <div class="container mx-auto px-4">
                <h1 class="text-4xl md:text-5xl font-extrabold text-primary-dark text-center mb-12">بناء باقتك المخصصة - اختر خدماتك</h1>

                <div class="package-builder-layout">
                    <!-- Filters and Mini Cart Summary (Moved to sidebar) -->
                    <div class="lg:col-span-1-filters">
                        <div class="bg-white rounded-lg shadow-lg p-6 mb-8 sticky top-24">
                            <h3 class="text-xl font-bold text-primary-dark mb-4">التصنيفات</h3>
                            <ul class="space-y-2">
                                <li><a href="#package-builder-page" onclick="renderProducts('all')" class="text-gray-700 hover:text-primary-accent">جميع الخدمات</a></li>
                                <li><a href="#package-builder-page" onclick="renderProducts('تسويق')" class="text-gray-700 hover:text-primary-accent">خدمات التسويق</a></li>
                                <li><a href="#package-builder-page" onclick="renderProducts('تطوير')" class="text-gray-700 hover:text-primary-accent">خدمات التطوير</a></li>
                                <li><a href="#package-builder-page" onclick="renderProducts('ذكاء اصطناعي')" class="text-gray-700 hover:text-primary-accent">حلول الذكاء الاصطناعي</a></li>
                                <li><a href="#package-builder-page" onclick="renderProducts('تطوير أعمال')" class="text-gray-700 hover:text-primary-accent">تطوير أعمال</a></li>
                                <li><a href="#package-builder-page" onclick="renderProducts('محاسبة')" class="text-gray-700 hover:text-primary-accent">محاسبة</a></li>
                                <li><a href="#package-builder-page" onclick="renderProducts('قانونية')" class="text-gray-700 hover:text-primary-accent">خدمات قانونية</a></li>
                                <li><a href="#package-builder-page" onclick="renderProducts('تقنية')" class="text-gray-700 hover:text-primary-accent">حلول تقنية</a></li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Products Listing -->
                    <div class="lg:col-span-3-products grid grid-cols-1 md:grid-cols-2 gap-6" id="ecommerce-products">
                        <!-- Products will be populated here by JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Portfolio / Case Studies Page (Now includes Client Logos) -->
        <div id="portfolio-page" class="page-content pt-24 pb-12 bg-gray-50">
            <div class="container mx-auto px-4">
                <h1 class="text-4xl md:text-5xl font-extrabold text-primary-dark text-center mb-12">عملاؤنا وقصص نجاحنا - أمثلة حية للنمو</h1>

                <!-- Client Logos (Placeholder Carousel) -->
                <section class="bg-white rounded-lg shadow-lg p-6 md:p-8 mb-10 border-r-8 border-primary-accent animate-fade-in">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">شركاؤنا في النجاح</h2>
                    <div class="flex flex-wrap justify-center items-center gap-8 md:gap-12">
                        <!-- Logos - replace with actual client logos -->
                        <!-- [Image of Client A] -->
                        <img src="https://placehold.co/120x60/d1d5db/4b5563?text=Client+A" alt="Client Logo A" class="h-16 opacity-80 hover:opacity-100 transition-opacity duration-300 filter grayscale hover:grayscale-0"/>
                        <!-- [Image of Client B] -->
                        <img src="https://placehold.co/120x60/d1d5db/4b5563?text=Client+B" alt="Client Logo B" class="h-16 opacity-80 hover:opacity-100 transition-opacity duration-300 filter grayscale hover:grayscale-0"/>
                        <!-- [Image of Client C] -->
                        <img src="https://placehold.co/120x60/d1d5db/4b5563?text=Client+C" alt="Client Logo C" class="h-16 opacity-80 hover:opacity-100 transition-opacity duration-300 filter grayscale hover:grayscale-0"/>
                        <!-- [Image of Client D] -->
                        <img src="https://placehold.co/120x60/d1d5db/4b5563?text=Client+D" alt="Client Logo D" class="h-16 opacity-80 hover:opacity-100 transition-opacity duration-300 filter grayscale hover:grayscale-0"/>
                        <!-- [Image of Client E] -->
                        <img src="https://placehold.co/120x60/d1d5db/4b5563?text=Client+E" alt="Client Logo E" class="h-16 opacity-80 hover:opacity-100 transition-opacity duration-300 filter grayscale hover:grayscale-0"/>
                    </div>
                </section>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="case-studies-grid">
                    <!-- Case study cards will be dynamically inserted here by JS -->
                </div>

                <!-- Case Study Modal -->
                <div id="case-study-modal" class="modal-overlay" style="display: none;">
                    <div class="modal-content w-full max-w-2xl max-h-[90vh]">
                        <button
                            onclick="hideCaseStudyModal()"
                            class="absolute top-3 right-3 text-gray-500 hover:text-gray-700 text-3xl font-semibold leading-none focus:outline-none"
                            aria-label="Close"
                        >
                            &times;
                        </button>
                        <h2 class="text-3xl font-extrabold text-primary-dark mb-4 text-center" id="modal-case-study-client"></h2>
                        <p class="text-gray-600 text-center text-lg mb-6" id="modal-case-study-industry"></p>

                        <!-- [Image of project] -->
                        <img id="modal-case-study-image" src="" alt="صورة المشروع" class="w-full h-64 object-cover rounded-md mb-6"/>

                        <div class="space-y-4 text-right">
                            <div>
                                <h3 class="text-xl font-semibold text-primary-dark mb-2">التحدي:</h3>
                                <p class="text-gray-700" id="modal-case-study-challenge"></p>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-primary-dark mb-2">الحل المقدم:</h3>
                                <p class="text-gray-700" id="modal-case-study-solution"></p>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-primary-dark mb-2">النتائج القابلة للقياس:</h3>
                                <p class="text-gray-700" id="modal-case-study-results"></p>
                            </div>
                        </div>
                        <!-- AI-Powered Case Study Summary Feature -->
                        <div class="mt-8 pt-4 border-t border-gray-200">
                            <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">✨ ملخص وتحليلات بالذكاء الاصطناعي</h3>
                            <button
                                onclick="generateCaseStudySummary()"
                                id="generate-summary-button"
                                class="w-full bg-primary-dark text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-secondary-dark transition duration-300 transform hover:scale-105"
                            >
                                توليد ملخص النقاط الرئيسية ✨
                            </button>
                            <div id="ai-summary-output" class="mt-4 bg-gray-50 p-4 rounded-md text-gray-800 hidden">
                                <p id="ai-summary-text" class="leading-relaxed"></p>
                                <div id="ai-summary-loading" class="text-center text-primary-dark mt-2 hidden">
                                    <i class="fas fa-spinner fa-spin"></i> جاري التوليد...
                                </div>
                            </div>
                        </div>
                        <div class="mt-8 text-center">
                            <button
                                onclick="hideCaseStudyModal(); navigate('contact-page', 'contact-form-modal', 'طلب استشارة لمشروع [اسم العميل]');"
                                class="bg-primary-dark text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-secondary-dark transition duration-300 transform hover:scale-105"
                            >
                                اطلب استشارة مجانية لمشروعك
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Testimonials & Reviews (Existing section) -->
        <div id="testimonials-section" class="page-content pt-24 pb-12 bg-gray-50">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-3xl md:text-4xl font-extrabold text-primary-dark mb-10">ماذا يقول عملاؤنا</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Testimonial Card 1 -->
                    <div class="bg-white rounded-lg p-6 shadow-md border-b-4 border-primary-accent">
                        <p class="text-gray-700 text-lg italic mb-4">"TechnoVision غيّرت قواعد اللعبة بالنسبة لشركتنا. لقد حققوا نتائج تفوق توقعاتنا في وقت قياسي."</p>
                        <p class="font-bold text-primary-dark">- أحمد السيد</p>
                        <p class="text-gray-500 text-sm">مدير تسويق، شركة الأفق الجديد</p>
                    </div>
                    <!-- Testimonial Card 2 -->
                    <div class="bg-white rounded-lg p-6 shadow-md border-b-4 border-primary-accent">
                        <p class="text-gray-700 text-lg italic mb-4">"الفريق احترافي ومتعاون للغاية. خدماتهم المدعومة بالذكاء الاصطناعي فريدة من نوعها وقوية!"</p>
                        <p class="font-bold text-primary-dark">- سارة علي</p>
                        <p class="text-gray-500 text-sm">الرئيس التنفيذي، حلول الابتكار</p>
                    </div>
                    <!-- Testimonial Card 3 -->
                    <div class="bg-white rounded-lg p-6 shadow-md border-b-4 border-primary-accent">
                        <p class="text-gray-700 text-lg italic mb-4">"بفضل TechnoVision، تضاعفت زيارات موقعنا وارتفعت مبيعاتنا بشكل ملحوظ. أوصي بهم بشدة."</p>
                        <p class="font-bold text-primary-dark">- خالد منصور</p>
                        <p class="text-gray-500 text-sm">صاحب متجر إلكتروني، متجر النخبة</p>
                    </div>
                </div>
            </div>
        </div>


        <!-- AI Content Editing Services Page -->
        <div id="ai-content-editing-page" class="page-content pt-24 pb-12 bg-gray-50">
            <div class="container mx-auto px-4">
                <h1 class="text-4xl md:text-5xl font-extrabold text-primary-dark text-center mb-12">حلول الذكاء الاصطناعي: الابتكار في صميم خدماتنا</h1>

                <!-- AI Overview -->
                <section class="bg-white rounded-lg shadow-lg p-6 md:p-8 mb-10 border-r-8 border-primary-accent animate-fade-in">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4 text-right">كيف ندمج الذكاء الاصطناعي في خدماتنا؟</h2>
                    <p class="text-gray-700 leading-relaxed text-right mb-4">
                        في TechnoVision، نؤمن بأن الذكاء الاصطناعي ليس مجرد أداة، بل هو ركيزة أساسية لتقديم حلول مبتكرة وفعالة. قسم البحث والتطوير بالذكاء الاصطناعي (AI R&D) لدينا يكرس جهوده لتطوير وتطبيق أحدث التقنيات لتعزيز كل جانب من جوانك أعمال عملائنا في السوق المصري والعربي.
                    </p>
                    <p class="text-gray-700 leading-relaxed text-right mb-4">
                        نستخدم الذكاء الاصطناعي في:
                    </p>
                    <ul class="list-disc list-inside text-gray-600 mb-4 space-y-2 text-right">
                        <li>**تحليل البيانات المتقدم:** الكشف عن الأنماط والرؤى الخفية لتقديم استراتيجيات تسويقية وتجارية أكثر دقة وفاعلية في السوق المحلي.</li>
                        <li>**إنتاج المحتوى وتحسينه:** المساعدة في توليد أفكار المحتوى، تحسين النصوص، وضمان جودتها باللغة العربية الفصحى واللهجة المصرية (كما في خدمة التحرير).</li>
                        <li>**تخصيص الحملات التسويقية:** استهداف الجمهور بدقة أعلى وتقديم تجارب مخصصة تزيد من معدلات التحويل.</li>
                        <li>**تحسين العمليات التشغيلية:** أتمتة المهام المتكررة في الأقسام المختلفة (مثل المحاسبة والدعم الفني) لزيادة الكفاءة وتقليل التكاليف.</li>
                    </ul>
                </section>

                <!-- AI Content Editing & Review Services - Detailed -->
                <section class="bg-white rounded-lg shadow-lg p-6 md:p-8 mb-10 border-l-8 border-primary-dark animate-fade-in">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4 text-right">تحرير ومراجعة المحتوى بالذكاء الاصطناعي</h2>
                    <p class="text-gray-700 leading-relaxed text-right mb-4">
                        خدمة فريدة تضمن جودة المحتوى الناتج عن الذكاء الاصطناعي، مع لمسة إنسانية احترافية. نقوم بمراجعة وتحرير النصوص لضمان تدفقها الطبيعي، خلوها من الأخطاء اللغوية والنحوية، مطابقتها لنبرة علامتك التجارية، والتأكد من أنها تبدو وكأنها مكتوبة بواسطة إنسان خبير.
                    </p>
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">لماذا هذه الخدمة مهمة؟</h3>
                    <p class="text-gray-700 leading-relaxed text-right mb-4">
                        على الرغم من أن الذكاء الاصطناعي يمكنه توليد كميات هائلة من المحتوى بسرعة، إلا أنه غالبًا ما يفتقر إلى اللمسة البشرية، الإبداع، والدقة السياقية التي تميز المحتوى عالي الجودة. TechnoVision تحل هذه التحديات من خلال دمج قوة الذكاء الاصطناعي لدينا (للكشف والتحليل السريع) مع خبرة محررينا البشريين (للتعديل الدقيق والتخصيص الإبداعي).
                    </p>
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">مزايا فريدة لخدمتنا:</h3>
                    <ul class="list-disc list-inside text-gray-600 mb-4 space-y-2 text-right">
                        <li>**كشف الأنماط الآلية:** تحديد الجمل والعبارات التي تظهر عادة في المحتوى الذي يكتبه الذكاء الاصطناعي لضمان الأصالة.</li>
                        <li>**تقييم "إنسانية" المحتوى:** إعطاء درجة توضح مدى قرب المحتوى من الكتابة البشرية والطبيعية.</li>
                        <li>**تحليل نبرة الصوت والعاطفة:** التأكد من أن المحتوى ينقل المشاعر والنبرة المطلوبة بدقة، ويتناسب مع الجمهور المستهدف.</li>
                    </ul>
                </section>

                <!-- AI Content Idea Generator Feature -->
                <section class="bg-white rounded-lg shadow-lg p-6 md:p-8 mb-10 border-r-8 border-primary-accent animate-fade-in">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4 text-center">✨ مولد أفكار المحتوى بالذكاء الاصطناعي</h2>
                    <p class="text-gray-700 mb-4 text-center">أدخل موضوعًا واحصل على أفكار محتوى مبتكرة تساعدك على البدء في كتابة المحتوى الجذاب والموجه للجمهور المصري!</p>
                    <div class="space-y-4">
                        <div>
                            <label for="content-topic" class="block text-gray-700 text-sm font-bold mb-2">موضوع المحتوى:</label>
                            <textarea
                                id="content-topic"
                                rows="3"
                                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-primary-accent"
                                placeholder="مثال: استراتيجيات التسويق الرقمي للشركات المصرية الصغيرة"
                            ></textarea>
                        </div>
                        <button
                            onclick="generateContentIdeas()"
                            id="generate-ideas-button"
                            class="w-full bg-primary-dark text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-secondary-dark transition duration-300 transform hover:scale-105"
                        >
                            توليد الأفكار ✨
                        </button>
                        <div id="ai-content-ideas-output" class="mt-4 bg-gray-50 p-4 rounded-md text-gray-800 hidden">
                            <p id="ai-ideas-text" class="leading-relaxed"></p>
                            <div id="ai-ideas-loading" class="text-center text-primary-dark mt-2 hidden">
                                <i class="fas fa-spinner fa-spin"></i> جاري التوليد...
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Pricing or Quote -->
                <section class="py-10 bg-primary-dark text-white text-center rounded-lg mt-10 shadow-xl">
                    <h2 class="text-3xl font-extrabold mb-4">هل أنت مستعد للاستفادة من قوة الذكاء الاصطناعي؟</h2>
                    <p class="text-lg mb-6 opacity-90">تواصل معنا لمناقشة كيف يمكن لحلولنا المدعومة بالذكاء الاصطناعي أن تدفع نموك.</p>
                    <button
                        onclick="showContactFormModal()"
                        class="bg-primary-accent text-primary-dark font-bold py-3 px-8 rounded-full shadow-lg hover:bg-primary-accent-hover transition duration-300 transform hover:scale-105"
                    >
                        اطلب استشارة مجانية
                    </button>
                </section>
            </div>
        </div>

        <!-- Contact Us Page (Serves as final order form for Package Builder) -->
        <div id="contact-page" class="page-content pt-24 pb-12 bg-gray-50">
            <div class="container mx-auto px-4">
                <h1 class="text-4xl md:text-5xl font-extrabold text-primary-dark text-center mb-12">اتصل بنا - لنبدأ رحلة نجاحك الرقمي في مصر</h1>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-10 bg-white rounded-lg shadow-xl p-6 md:p-10">
                    <!-- Contact Form -->
                    <div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-6 text-right">أرسل لنا رسالة</h2>
                        <form id="contact-form" class="space-y-6">
                            <div>
                                <label for="contact-name" class="block text-gray-700 text-sm font-bold mb-2 text-right">الاسم الكامل</label>
                                <input
                                    type="text"
                                    id="contact-name"
                                    name="name"
                                    class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-primary-accent"
                                    required
                                />
                            </div>
                            <div>
                                <label for="contact-email" class="block text-gray-700 text-sm font-bold mb-2 text-right">البريد الإلكتروني</label>
                                <input
                                    type="email"
                                    id="contact-email"
                                    name="email"
                                    class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-primary-accent"
                                    required
                                />
                            </div>
                            <div>
                                <label for="contact-phone" class="block text-gray-700 text-sm font-bold mb-2 text-right">رقم الهاتف (اختياري)</label>
                                <input
                                    type="tel"
                                    id="contact-phone"
                                    name="phone"
                                    class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-primary-accent"
                                />
                            </div>
                            <div>
                                <label for="contact-message" class="block text-gray-700 text-sm font-bold mb-2 text-right">رسالتك</label>
                                <textarea
                                    id="contact-message"
                                    name="message"
                                    rows="6"
                                    class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-primary-accent"
                                    required
                                ></textarea>
                            </div>
                            <button
                                type="submit"
                                id="contact-submit-button"
                                class="w-full bg-primary-dark hover:bg-secondary-dark text-white font-bold py-3 px-6 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 transform hover:scale-105"
                            >
                                إرسال الرسالة
                            </button>
                            <p id="contact-submit-message" class="text-center mt-4"></p>
                        </form>
                    </div>

                    <!-- Direct Contact Details & Map -->
                    <div class="flex flex-col justify-between">
                        <div>
                            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-right">تفاصيل الاتصال</h2>
                            <p class="text-gray-700 flex items-center mb-4 text-right justify-end">
                                info@technovision.com <svg class="w-6 h-6 mr-3 text-primary-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                            </p>
                            <p class="text-gray-700 flex items-center mb-4 text-right justify-end">
                                +20 10 1234 5678 <svg class="w-6 h-6 mr-3 text-primary-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                            </p>
                            <p class="text-gray-700 flex items-start mb-6 text-right justify-end">
                                جمهورية مصر العربية، القاهرة، [عنوان تفصيلي لـ TechnoVision إذا وجد مقر فعلي مستقبلي] <svg class="w-6 h-6 mr-3 text-primary-dark flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.828 0L6.343 16.657m10.607-10.607a4 4 0 11-5.656 0 4 4 0 015.656 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a2 2 0 002 2h2m0-6V5a2 2 0 012-2h2a2 2 0 012 2v14"></path></svg>
                            </p>

                            <!-- Interactive Map Placeholder -->
                            <div class="h-64 bg-gray-200 rounded-md overflow-hidden shadow-inner flex items-center justify-center">
                                <iframe
                                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3453.8643197607755!2d31.23351981506543!3d30.04441998188168!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x145831969a7b6c59%3A0xcb1b2f6b3d1b2a1a!2z2YXYqtmK2YXZitipINmF2K_ZhNin2YHYp9mC!5e0!3m2!1sar!2seg!4v1678888888888!5m2!1sar!2seg"
                                    width="100%"
                                    height="100%"
                                    style="border: 0;"
                                    allowfullscreen=""
                                    loading="lazy"
                                    referrerpolicy="no-referrer-when-downgrade"
                                    title="موقعنا على الخريطة في القاهرة"
                                ></iframe>
                            </div>
                        </div>
                        <!-- Social Media Links -->
                        <div class="mt-8 text-center md:text-left">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">تابعنا على وسائل التواصل الاجتماعي</h3>
                            <div class="flex justify-center md:justify-start space-x-6">
                                <a href="#" class="text-gray-600 hover:text-primary-dark transition duration-300" aria-label="Facebook">
                                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 0H5a5 5 0 00-5 5v14a5 5 0 005 5h14a5 5 0 005-5V5a5 5 0 00-5-5zm-2 7h-2v3h2v3h-2v7h-3v-7H9V7h3V5c0-1.657 1.343-3 3-3h2v3z"></path></svg>
                                </a>
                                <a href="#" class="text-gray-600 hover:text-primary-dark transition duration-300" aria-label="Twitter">
                                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22 4.041c-.722.322-1.5.541-2.316.643.834-.5 1.475-1.29 1.776-2.235-.783.465-1.658.806-2.585.992-.74-.789-1.79-1.284-2.955-1.284-2.23 0-4.045 1.815-4.045 4.045 0 .317.035.626.103.923C9.092 9.202 5.097 7.007 2.378 3.753c-.35.602-.547 1.299-.547 2.046 0 1.402.714 2.64 1.797 3.364-.66-.021-1.284-.203-1.823-.504v.05c0 1.968 1.402 3.606 3.264 3.982-.34.093-.7.143-1.07.143-.263 0-.52-.026-.77-.074.518 1.622 2.016 2.793 3.79 2.825-1.392 1.09-3.14 1.737-5.048 1.737-.329 0-.655-.021-.973-.057C2.923 19.34 5.098 20 7.375 20c8.854 0 13.682-7.334 13.682-13.682 0-.208-.005-.415-.014-.621.94-.679 1.758-1.53 2.404-2.497z"></path></svg>
                                </a>
                                <a href="#" class="hover:text-primary-accent transition duration-300" aria-label="LinkedIn">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22.23 0H1.77C.79 0 0 .77 0 1.77v20.46c0 .98.79 1.77 1.77 1.77h20.46c.98 0 1.77-.79 1.77-1.77V1.77C24 .79 23.21 0 22.23 0zM7.17 20.44H3.59V9.67h3.58v10.77zM5.38 8.1c-1.2 0-2.17-.97-2.17-2.17 0-1.2.97-2.17 2.17-2.17 1.2 0 2.17.97 2.17 2.17 0 1.2-.97 2.17-2.17 2.17zM20.44 20.44h-3.58v-5.6c0-1.34-.02-3.07-1.87-3.07-1.87 0-2.16 1.46-2.16 2.97v5.7H9.25V9.67h3.42v1.57h.05c.47-.89 1.62-1.83 3.36-1.83 3.59 0 4.25 2.36 4.25 5.43v6.39z"></path></svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar Cart -->
    <div id="sidebar-cart" class="sidebar-cart">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-2xl font-bold text-primary-dark">باقة خدماتك</h3>
            <button onclick="toggleSidebarCart()" class="text-gray-500 hover:text-gray-700 text-3xl font-semibold leading-none focus:outline-none" aria-label="Close cart">
                &times;
            </button>
        </div>
        <div class="sidebar-cart-content" id="sidebar-cart-items">
            <!-- Cart items will be rendered here -->
            <div id="empty-sidebar-cart-message" class="text-center text-gray-600 mt-4">باقة الخدمات فارغة.</div>
        </div>
        <div class="sidebar-cart-footer">
            <div class="flex justify-between mb-2">
                <span>الإجمالي الفرعي:</span>
                <span id="sidebar-subtotal">0</span> جنيه
            </div>
            <div class="flex justify-between mb-4">
                <span>الضريبة (10%):</span>
                <span id="sidebar-tax">0</span> جنيه
            </div>
            <div class="flex justify-between font-bold text-lg border-t border-gray-200 pt-4">
                <span>المبلغ الكلي:</span>
                <span id="sidebar-grand-total">0</span> جنيه
            </div>
            <button onclick="sendPackageOrder()" class="w-full bg-primary-accent text-primary-dark font-bold py-3 mt-6 rounded-lg hover:bg-primary-accent-hover transition">
                <i class="fas fa-paper-plane ml-2"></i> إرسال طلب الباقة
            </button>
        </div>
    </div>
    <div id="sidebar-cart-overlay" class="sidebar-cart-overlay" onclick="toggleSidebarCart()"></div>

    <!-- Contact Form Modal (for general inquiries) -->
    <div id="contact-form-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button
                onclick="hideContactFormModal()"
                class="absolute top-3 right-3 text-gray-500 hover:text-gray-700 text-3xl font-semibold leading-none focus:outline-none"
                aria-label="Close"
            >
                &times;
            </button>
            <h2 class="text-3xl font-extrabold text-primary-dark mb-6 text-center" id="modal-title-dynamic">اطلب استشارة مجانية</h2>
            <form id="modal-contact-form" class="space-y-4">
                <div>
                    <label for="modal-name" class="block text-gray-700 text-sm font-bold mb-2">الاسم الكامل</label>
                    <input
                        type="text"
                        id="modal-name"
                        name="name"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-primary-accent"
                        required
                    />
                </div>
                <div>
                    <label for="modal-email" class="block text-gray-700 text-sm font-bold mb-2">البريد الإلكتروني</label>
                    <input
                        type="email"
                        id="modal-email"
                        name="email"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-primary-accent"
                        required
                    />
                </div>
                <div>
                    <label for="modal-phone" class="block text-gray-700 text-sm font-bold mb-2">رقم الهاتف (اختياري)</label>
                    <input
                        type="tel"
                        id="modal-phone"
                        name="phone"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-primary-accent"
                    />
                </div>
                <div>
                    <label for="modal-message" class="block text-gray-700 text-sm font-bold mb-2">رسالتك</label>
                    <textarea
                        id="modal-message"
                        name="message"
                        rows="4"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-primary-accent"
                        required
                    ></textarea>
                </div>
                <button
                    type="submit"
                    id="modal-submit-button"
                    class="w-full bg-primary-dark hover:bg-secondary-dark text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 transform hover:scale-105"
                >
                    إرسال الطلب
                </button>
                <p id="modal-submit-message" class="text-center mt-4"></p>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-primary-dark text-gray-300 py-10 px-4 mt-12">
        <div class="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Company Info -->
            <div>
                <h3 class="text-xl font-bold text-primary-accent mb-4">TechnoVision</h3>
                <p class="text-sm">نقود النمو الرقمي لعملائنا باستراتيجيات مبتكرة ومدعومة بالذكاء الاصطناعي.</p>
                <p class="text-sm mt-2">&copy; <span id="current-year"></span> TechnoVision. جميع الحقوق محفوظة.</p>
            </div>

            <!-- Quick Links -->
            <div>
                <h3 class="text-xl font-bold text-primary-accent mb-4">روابط سريعة</h3>
                <ul class="space-y-2">
                    <li><a href="#home-page" onclick="navigate('home-page')" class="hover:text-primary-accent transition duration-300">الرئيسية</a></li>
                    <li><a href="#about-us-section" onclick="navigate('about-us-section')" class="hover:text-primary-accent transition duration-300">من نحن</a></li>
                    <li><a href="#services-page" onclick="navigate('services-page')" class="hover:text-primary-accent transition duration-300">خدماتنا</a></li>
                    <li><a href="#package-builder-page" onclick="navigate('package-builder-page')" class="hover:text-primary-accent transition duration-300">بناء باقتك</a></li>
                    <li><a href="#portfolio-page" onclick="navigate('portfolio-page')" class="hover:text-primary-accent transition duration-300">عملاؤنا وقصص النجاح</a></li>
                    <li><a href="#ai-content-editing-page" onclick="navigate('ai-content-editing-page')" class="hover:text-primary-accent transition duration-300">حلول الذكاء الاصطناعي</a></li>
                    <li><a href="#contact-page" onclick="navigate('contact-page')" class="hover:text-primary-accent transition duration-300">اتصل بنا</a></li>
                </ul>
            </div>

            <!-- Contact Info & Social Media -->
            <div>
                <h3 class="text-xl font-bold text-primary-accent mb-4">اتصل بنا</h3>
                <p class="flex items-center mb-2">
                    <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                    info@technovision.com
                </p>
                <p class="flex items-center mb-2">
                    <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                    +20 10 1234 5678
                </p>
                <div class="flex space-x-4 mt-4">
                    <!-- Social Media Icons (placeholders) -->
                    <a href="#" class="hover:text-primary-accent transition duration-300" aria-label="Facebook">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 0H5a5 5 0 00-5 5v14a5 5 0 005 5h14a5 5 0 005-5V5a5 5 0 00-5-5zm-2 7h-2v3h2v3h-2v7h-3v-7H9V7h3V5c0-1.657 1.343-3 3-3h2v3z"></path></svg>
                    </a>
                    <a href="#" class="hover:text-primary-accent transition duration-300" aria-label="Twitter">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22 4.041c-.722.322-1.5.541-2.316.643.834-.5 1.475-1.29 1.776-2.235-.783.465-1.658.806-2.585.992-.74-.789-1.79-1.284-2.955-1.284-2.23 0-4.045 1.815-4.045 4.045 0 .317.035.626.103.923C9.092 9.202 5.097 7.007 2.378 3.753c-.35.602-.547 1.299-.547 2.046 0 1.402.714 2.64 1.797 3.364-.66-.021-1.284-.203-1.823-.504v.05c0 1.968 1.402 3.606 3.264 3.982-.34.093-.7.143-1.07.143-.263 0-.52-.026-.77-.074.518 1.622 2.016 2.793 3.79 2.825-1.392 1.09-3.14 1.737-5.048 1.737-.329 0-.655-.021-.973-.057C2.923 19.34 5.098 20 7.375 20c8.854 0 13.682-7.334 13.682-13.682 0-.208-.005-.415-.014-.621.94-.679 1.758-1.53 2.404-2.497z"></path></svg>
                    </a>
                    <a href="#" class="hover:text-primary-accent transition duration-300" aria-label="LinkedIn">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22.23 0H1.77C.79 0 0 .77 0 1.77v20.46c0 .98.79 1.77 1.77 1.77h20.46c.98 0 1.77-.79 1.77-1.77V1.77C24 .79 23.21 0 22.23 0zM7.17 20.44H3.59V9.67h3.58v10.77zM5.38 8.1c-1.2 0-2.17-.97-2.17-2.17 0-1.2.97-2.17 2.17-2.17 1.2 0 2.17.97 2.17 2.17 0 1.2-.97 2.17-2.17 2.17zM20.44 20.44h-3.58v-5.6c0-1.34-.02-3.07-1.87-3.07-1.87 0-2.16 1.46-2.16 2.97v5.7H9.25V9.67h3.42v1.57h.05c.47-.89 1.62-1.83 3.36-1.83 3.59 0 4.25 2.36 4.25 5.43v6.39z"></path></svg>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        /*
        * ملاحظة هامة: في بيئة الإنتاج، يُفضل نقل هذه الأكواد إلى ملف JavaScript خارجي (مثل assets/js/main.js)
        * لتحسين أداء تحميل الصفحة واستغلال التخزين المؤقت للمتصفح.
        */

        // قائمة بجميع أقسام الصفحة التي يتم التنقل بينها بواسطة JavaScript
        const pages = ['home-page', 'about-us-section', 'services-page', 'package-builder-page', 'portfolio-page', 'ai-content-editing-page', 'contact-page'];
        
        // بيانات دراسات الحالة لعرضها في قسم "عملاؤنا وقصص النجاح"
        const caseStudiesData = [
            {
                id: 1,
                client: "شركة الأفق الجديد",
                industry: "التجارة الإلكترونية",
                challenge: "زيادة الوعي بالعلامة التجارية ومبيعات المنتجات الجديدة في السوق المصري التنافسي.",
                solution: "حملة تسويق رقمي متكاملة (SEO, SMM, PPC) مع التركيز على المحتوى الجذاب وإعلانات الفيديو الموجهة للجمهور المصري، بالإضافة إلى حملات بريد إلكتروني مخصصة.",
                results: "زيادة حركة المرور العضوية بنسبة 150%، وزيادة المبيعات بنسبة 70% خلال 6 أشهر، مما عزز مكانة العميل في السوق.",
                // [Image of Egyptian E-commerce Campaign]
                image: "https://placehold.co/600x400/2a2a32/fcbf01?text=حملة+التجارة+الإلكترونية+مصرية" 
            },
            {
                id: 2,
                client: "حلول الابتكار المصرية",
                industry: "الخدمات التقنية",
                challenge: "تطوير هوية بصرية جديدة وموقع ويب عصري يعكس قيم الشركة التكنولوجية المبتكرة.",
                solution: "إعادة تصميم العلامة التجارية بالكامل بالتعاون مع مصممين مصريين، وتطوير موقع ويب متجاوب مع التركيز على تجربة المستخدم السلسة والتصميم الجذاب.",
                results: "تحسين إدراك العلامة التجارية بنسبة 40%، وزيادة التفاعل على الموقع بنسبة 30%، مما جذب المزيد من العملاء المحتملين في القطاع التقني.",
                // [Image of Egyptian Tech Identity and Web]
                image: "https://placehold.co/600x400/fcbf01/2a2a32?text=هوية+وويب+تقني+مصري" 
            },
            {
                id: 3,
                client: "متجر النخبة للمنتجات المصرية",
                industry: "التجزئة",
                challenge: "تحسين ترتيب المنتجات في محركات البحث وزيادة معدل التحويل للمتجر الإلكتروني.",
                solution: "استراتيجية SEO شاملة تستهدف الكلمات المفتاحية المحلية، وتحسين صفحات المنتجات، وتنفيذ حملات بريد إلكتروني مستهدفة لزيادة المبيعات والولاء.",
                results: "زيادة الزيارات العضوية بنسبة 80%، وارتفاع معدل التحويل بنسبة 25%، مما أدى إلى نمو ملحوظ في إيرادات المتجر.",
                // [Image of Egyptian Retail Sales Optimization]
                image: "https://placehold.co/600x400/2a2a32/fcbf01?text=تحسين+مبيعات+التجزئة+مصر" 
            },
            {
                id: 4,
                client: "المؤسسة التعليمية المتقدمة",
                industry: "التعليم",
                challenge: "جذب الطلاب الجدد وتعزيز التسجيل في البرامج التعليمية المعتمدة.",
                solution: "تسويق شامل عبر وسائل التواصل الاجتماعي مع التركيز على حملات الفيديو التوعوية، وإعلانات PPC مستهدفة، وإنشاء محتوى تعليمي جذاب يبرز مزايا المؤسسة.",
                results: "زيادة الاستفسارات بنسبة 60%، وتحقيق 40% زيادة في التسجيلات النهائية للعام الدراسي الجديد.",
                // [Image of Egyptian Educational Marketing]
                image: "https://placehold.co/600x400/fcbf01/2a2a32?text=تسويق+تعليمي+مصر" 
            },
        ];

        // بيانات المنتجات (الخدمات) المعروضة في قسم "بناء باقتك"
        // تم تحديث هذه البيانات لتكون أكثر تفصيلاً ودعم خيارات المدة والتسعير المرن.
        const products = [
            // خدمات التسويق الرقمي
            {
                id: 'DM01',
                name: "تصميم 10 منشورات شهرياً",
                description: "للفيس بوك وإنستغرام (لخدمة التصميم)",
                detailedDescription: "تشمل 10 تصميمات احترافية وجذابة لمنصات التواصل الاجتماعي (فيسبوك وإنستغرام) شهرياً، مع مراعاة الهوية البصرية لعلامتك التجارية والجمهور المستهدف.",
                basePrice: 1000, // سعر أساسي لشهر واحد
                durationUnit: 'شهر',
                durationOptions: [ // خيارات التسعير بناءً على المدة
                    { duration: 1, name: "شهر واحد", price: 1000 },
                    { duration: 3, name: "3 أشهر (خصم 10%)", price: 2700 }, // 900 للشهر
                    { duration: 6, name: "6 أشهر (خصم 15%)", price: 5100 }  // 850 للشهر
                ],
                category: "تسويق",
                // [Image of Post Design]
                image: "https://placehold.co/400x250/2a2a32/fcbf01?text=تصميم+منشورات"
            },
            {
                id: 'DM02',
                name: "إدارة الردود والنشر لحسابين سوشيال ميديا",
                description: "إدارة تفاعلية لحسابين (24 ساعة/يوم)",
                detailedDescription: "نقدم إدارة كاملة للردود على الرسائل والتعليقات، بالإضافة إلى النشر المجدول لحسابين على منصات التواصل الاجتماعي (مثل فيسبوك وإنستغرام)، وذلك لمدة 24 ساعة يومياً على مدار 30 يومًا، لضمان تفاعل مستمر وفعال مع جمهورك.",
                basePrice: 2000, // سعر أساسي لشهر واحد (24 ساعة)
                durationUnit: 'شهر',
                durationOptions: [
                    { duration: 1, name: "شهر واحد (24 ساعة/يوم)", price: 2000 },
                    { duration: 3, name: "3 أشهر (خصم 10%)", price: 5400 },
                    { duration: 6, name: "6 أشهر (خصم 15%)", price: 10200 }
                ],
                category: "تسويق",
                // [Image of Social Media Management]
                image: "https://placehold.co/400x250/fcbf01/2a2a32?text=إدارة+سوشيال"
            },
            {
                id: 'DM03',
                name: "حملة إعلانية ممولة (إعداد وإدارة)",
                description: "إعداد وإدارة حملة واحدة على منصة إعلانية.",
                detailedDescription: "نقوم بإعداد وتصميم حملة إعلانية ممولة واحدة على منصة اختيارك (مثل Meta Ads أو Google Ads)، وإدارة ميزانية الإعلان (تضاف منفصلة) وتحسين الأداء لمدة شهر واحد.",
                basePrice: 1500, // سعر ثابت للإعداد والإدارة لشهر
                durationUnit: 'مرة واحدة / شهر', // هذه الخدمة يمكن تكرارها شهريا
                durationOptions: [
                    { duration: 1, name: "إعداد وإدارة لشهر", price: 1500 },
                    { duration: 3, name: "إدارة لـ 3 أشهر (خصم)", price: 4000 }
                ],
                category: "تسويق",
                // [Image of Advertising Campaign]
                image: "https://placehold.co/400x250/2a2a32/fcbf01?text=حملة+إعلانية"
            },
            // خدمات تطوير الويب
            {
                id: 'WD01',
                name: "إنشاء موقع إلكتروني تعريفي (5 صفحات)",
                description: "تصميم وتطوير موقع ويب احترافي ومتجاوب.",
                detailedDescription: "تصميم وتطوير موقع ويب تعريفي احترافي مكون من 5 صفحات، متوافق مع كافة الأجهزة، ويعكس هويتك التجارية. يشمل الاستضافة لسنة واحدة ودومين (com. أو net.)",
                price: 8000, // سعر ثابت لمرة واحدة
                category: "تطوير",
                // [Image of Informative Website]
                image: "https://placehold.co/400x250/fcbf01/2a2a32?text=موقع+تعريفي"
            },
            {
                id: 'WD02',
                name: "تصميم متجر إلكتروني متكامل",
                description: "متجر متجاوب مع أنظمة دفع مصرية.",
                detailedDescription: "تصميم وتطوير متجر إلكتروني متكامل وجذاب، متوافق مع كافة الأجهزة، مع دمج أنظمة الدفع الإلكتروني المحلية (مثل فوري، وميزة، وباي بال) لتسهيل عمليات الشراء لعملائك في مصر.",
                price: 15000, // سعر ثابت لمرة واحدة
                category: "تطوير",
                // [Image of Store Design]
                image: "https://placehold.co/400x250/2a2a32/fcbf01?text=تصميم+متجر"
            },
            // حلول الذكاء الاصطناعي
            {
                id: 'AI01',
                name: "تحرير ومراجعة محتوى بالذكاء الاصطناعي",
                description: "تحرير 1000 كلمة شهرياً لضمان الجودة والأصالة.",
                detailedDescription: "نستخدم أدوات الذكاء الاصطناعي المتقدمة لتحسين جودة النصوص، تدقيقها لغوياً، والتأكد من طبيعيتها وجاذبيتها، مع مراجعة بشرية لـ 1000 كلمة شهرياً. هذه الخدمة تضمن أن المحتوى الذي ينتجه الذكاء الاصطناعي يبدو وكأنه مكتوب بواسطة إنسان خبير.",
                basePrice: 5000, // سعر أساسي لـ 1000 كلمة/شهر
                durationUnit: 'شهر',
                durationOptions: [
                    { duration: 1, name: "1000 كلمة / شهر", price: 5000 },
                    { duration: 3, name: "3000 كلمة / 3 أشهر (خصم 5%)", price: 14250 }, // 4750 للشهر
                    { duration: 6, name: "6000 كلمة / 6 أشهر (خصم 10%)", price: 27000 }  // 4500 للشهر
                ],
                category: "ذكاء اصطناعي",
                // [Image of AI Content]
                image: "https://placehold.co/400x250/fcbf01/2a2a32?text=AI+محتوى"
            },
            // خدمات تطوير الأعمال
            {
                id: 'BD01',
                name: "جلسة استشارية لتطوير الأعمال",
                description: "جلسة مكثفة مدتها ساعة واحدة مع خبير.",
                detailedDescription: "جلسة استشارية فردية مكثفة مع أحد خبراء تطوير الأعمال لدينا، لمناقشة تحدياتك وتحديد الفرص الرئيسية لنمو شركتك في السوق المصري.",
                price: 750, // سعر ثابت لمرة واحدة
                category: "تطوير أعمال",
                // [Image of Business Consulting]
                image: "https://placehold.co/400x250/2a2a32/fcbf01?text=استشارة+أعمال"
            },
            // خدمات محاسبية
            {
                id: 'ACC01',
                name: "إدارة دفاتر الحسابات الشهرية",
                description: "خدمة محاسبية شاملة لضمان دقة السجلات.",
                detailedDescription: "إدارة كاملة لدفاتر الحسابات الخاصة بشركتك، بما في ذلك تسجيل الإيرادات والمصروفات، وتصنيف المعاملات المالية، لضمان دقة السجلات المالية وشفافيتها.",
                basePrice: 3500, // سعر أساسي لشهر واحد
                durationUnit: 'شهر',
                durationOptions: [
                    { duration: 1, name: "شهر واحد", price: 3500 },
                    { duration: 3, name: "3 أشهر (خصم 5%)", price: 9975 },
                    { duration: 6, name: "6 أشهر (خصم 10%)", price: 18900 }
                ],
                category: "محاسبة",
                // [Image of Accounting Books]
                image: "https://placehold.co/400x250/fcbf01/2a2a32?text=دفاتر+محاسبة"
            },
            // خدمات قانونية
            {
                id: 'LS01',
                name: "تسجيل السجل التجاري",
                description: "خدمة تسجيل السجل التجاري للشركات الجديدة.",
                detailedDescription: "نتولى كافة إجراءات تسجيل السجل التجاري لشركتك الجديدة في مصر، من إعداد الأوراق اللازمة إلى المتابعة مع الجهات الحكومية المعنية لضمان إتمام العملية بسلاسة وسرعة.",
                price: 1500, // سعر ثابت لمرة واحدة
                category: "قانونية",
                // [Image of Commercial Register]
                image: "https://placehold.co/400x250/2a2a32/fcbf01?text=سجل+تجاري"
            },
            {
                id: 'LS02',
                name: "استخراج البطاقة الضريبية",
                description: "خدمة استخراج البطاقة الضريبية للشركات.",
                detailedDescription: "نقدم خدمة استخراج البطاقة الضريبية لشركتك، بما في ذلك تجهيز المستندات المطلوبة وتقديمها للجهات المختصة، لضمان امتثالك للوائح الضريبية المصرية.",
                price: 2000, // سعر ثابت لمرة واحدة
                category: "قانونية",
                // [Image of Tax Card]
                image: "https://placehold.co/400x250/fcbf01/2a2a32?text=بطاقة+ضريبية"
            },
            {
                id: 'LS03',
                name: "حزمة السجل التجاري والبطاقة الضريبية",
                description: "تسجيل السجل التجاري واستخراج البطاقة الضريبية معاً (خصم خاص).",
                detailedDescription: "احصل على خدمة تسجيل السجل التجاري واستخراج البطاقة الضريبية معاً بسعر مخفض. هذه الحزمة مثالية للشركات الناشئة لتبدأ عملياتها بشكل قانوني وسريع.",
                price: 2500, // سعر ثابت لمرة واحدة (خصم مجمع)
                category: "قانونية",
                // [Image of Legal Package]
                image: "https://placehold.co/400x250/2a2a32/fcbf01?text=حزمة+قانونية"
            },
            // حلول تقنية
            {
                id: 'TECH01',
                name: "صيانة ودعم فني للموقع",
                description: "دعم شهري شامل لموقعك الإلكتروني.",
                detailedDescription: "خدمة صيانة ودعم فني مستمرة لموقعك الإلكتروني، تشمل التحديثات الأمنية، النسخ الاحتياطي الدوري، حل المشكلات التقنية، وتحسين الأداء لضمان عمل موقعك بكفاءة ودون انقطاع.",
                basePrice: 1500, // سعر أساسي لشهر واحد
                durationUnit: 'شهر',
                durationOptions: [
                    { duration: 1, name: "شهر واحد", price: 1500 },
                    { duration: 3, name: "3 أشهر (خصم 5%)", price: 4275 },
                    { duration: 6, name: "6 أشهر (خصم 10%)", price: 8100 }
                ],
                category: "تقنية",
                // [Image of Website Support]
                image: "https://placehold.co/400x250/2a2a32/fcbf01?text=دعم+موقع"
            }
        ];

        // Shopping Cart - يتم تخزين سلة التسوق في localStorage
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // عناصر واجهة المستخدم الخاصة بسلة التسوق الجانبية
        const sidebarCart = document.getElementById('sidebar-cart');
        const sidebarCartOverlay = document.getElementById('sidebar-cart-overlay');
        const sidebarCartItems = document.getElementById('sidebar-cart-items');
        const emptySidebarCartMessage = document.getElementById('empty-sidebar-cart-message');
        const sidebarSubtotal = document.getElementById('sidebar-subtotal');
        const sidebarTax = document.getElementById('sidebar-tax');
        const sidebarGrandTotal = document.getElementById('sidebar-grand-total');
        const cartItemCountSpan = document.getElementById('cart-item-count'); // عداد العناصر في النافبار

        // الدالة لفتح/إغلاق سلة التسوق الجانبية
        function toggleSidebarCart() {
            sidebarCart.classList.toggle('open');
            sidebarCartOverlay.classList.toggle('open');
            // إضافة/إزالة كلاس على الـ body لدفع المحتوى إذا كانت السلة مفتوحة (للتجاوب)
            document.body.classList.toggle('cart-open');
            if (sidebarCart.classList.contains('open')) {
                renderSidebarCart(); // إعادة عرض محتوى السلة عند فتحها
            }
        }

        // دالة لعرض المنتجات في قسم "بناء باقتك" مع إمكانية الفلترة
        function renderProducts(filterCategory = 'all') {
            const container = document.getElementById('ecommerce-products');
            if (!container) {
                console.error("عنصر المنتجات (#ecommerce-products) غير موجود.");
                return;
            }
            
            container.innerHTML = ''; // مسح المحتوى القديم قبل إعادة العرض
            
            const filteredProducts = filterCategory === 'all' 
                ? products 
                : products.filter(p => p.category === filterCategory);

            if (filteredProducts.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-600 text-lg col-span-full">لا توجد خدمات في هذا التصنيف حالياً.</p>';
                return;
            }

            filteredProducts.forEach(product => {
                let priceDisplayHtml = '';
                let durationSelectHtml = '';
                let initialPrice = product.price || product.basePrice; // السعر الأولي (لمرة واحدة أو الخيار الأول للمدة)

                if (product.durationOptions && product.durationOptions.length > 0) {
                    // للخدمات ذات التسعير الديناميكي بناءً على المدة/الخيارات
                    initialPrice = product.durationOptions[0].price; // السعر الافتراضي هو أول خيار
                    durationSelectHtml = `
                        <div class="mt-2">
                            <label for="duration-select-${product.id}" class="block text-gray-700 text-sm mb-1">اختر المدة/الباقة:</label>
                            <select id="duration-select-${product.id}" 
                                class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-accent"
                                onchange="updateProductDisplayPrice('${product.id}')">
                                ${product.durationOptions.map(option => `
                                    <option value="${option.duration}" data-price="${option.price}" data-name="${option.name}">${option.name}</option>
                                `).join('')}
                            </select>
                        </div>
                    `;
                }
                
                priceDisplayHtml = `<span id="product-display-price-${product.id}" class="text-primary-accent font-bold text-lg">
                                        ${initialPrice.toLocaleString()} جنيه
                                    </span>`;

                const productCard = `
                    <div class="bg-white rounded-lg shadow-lg p-6 mb-6 border border-gray-200 transform transition duration-300 hover:scale-105 hover:shadow-xl">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-40 object-cover rounded-md mb-4"/>
                        <h3 class="text-xl font-bold text-primary-dark mb-2">${product.name}</h3>
                        <p class="text-gray-600 text-sm mb-4">${product.description}</p>
                        <div class="flex flex-col items-start mb-4">
                            ${priceDisplayHtml}
                            ${durationSelectHtml}
                        </div>
                        <div class="flex justify-end items-center mt-4">
                            <button onclick="addProductToCart('${product.id}')" 
                                class="bg-primary-dark text-white py-2 px-4 rounded-lg hover:bg-secondary-dark transition">
                                <i class="fas fa-cart-plus ml-2"></i> أضف إلى الباقة
                            </button>
                        </div>
                    </div>
                `;
                container.innerHTML += productCard;
            });
        }

        // تحديث السعر المعروض على بطاقة المنتج عند تغيير خيار المدة
        function updateProductDisplayPrice(productId) {
            const product = products.find(p => p.id === productId);
            if (!product || !product.durationOptions) return;

            const selectElement = document.getElementById(`duration-select-${productId}`);
            const selectedOption = selectElement.options[selectElement.selectedIndex];
            const price = parseFloat(selectedOption.dataset.price);

            const displayPriceSpan = document.getElementById(`product-display-price-${productId}`);
            displayPriceSpan.textContent = `${price.toLocaleString()} جنيه`;
        }

        // دالة لإضافة المنتج إلى سلة التسوق (إصلاح مشكلة عدم الظهور)
        function addProductToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) {
                console.error("المنتج غير موجود:", productId);
                return;
            }

            let selectedPrice = product.price; // للسعر لمرة واحدة
            let selectedDuration = undefined;
            let durationName = undefined;
            let cartItemUniqueId = product.id; // المعرف الفريد لعنصر السلة

            if (product.durationOptions && product.durationOptions.length > 0) {
                const selectElement = document.getElementById(`duration-select-${productId}`);
                if (selectElement) {
                    const selectedOption = selectElement.options[selectElement.selectedIndex];
                    selectedPrice = parseFloat(selectedOption.dataset.price);
                    selectedDuration = parseInt(selectedOption.value);
                    durationName = selectedOption.dataset.name;
                    cartItemUniqueId = `${product.id}-${selectedDuration}`; // لضمان تمايز الخيارات المختلفة لنفس المنتج
                } else {
                    // في حالة وجود durationOptions ولكن لم يتم العثور على عنصر التحديد
                    // قد يحدث هذا إذا لم يتم عرض القائمة المنسدلة بشكل صحيح أو خطأ في الـ ID
                    console.warn(`عنصر التحديد للخدمة ${productId} غير موجود على الرغم من وجود خيارات مدة.`);
                }
            }

            // البحث عن العنصر في السلة باستخدام الـ ID الفريد
            const existingItemIndex = cart.findIndex(item => item.cartId === cartItemUniqueId);

            if (existingItemIndex > -1) {
                // إذا كان العنصر موجودًا بالفعل، قم بزيادة الكمية
                cart[existingItemIndex].quantity += 1;
                console.log("تم زيادة كمية المنتج في السلة:", cart[existingItemIndex]);
            } else {
                // إذا لم يكن موجودًا، أضف العنصر الجديد
                cart.push({
                    cartId: cartItemUniqueId, // معرف فريد لكل إدخال في السلة
                    id: product.id, // معرف المنتج الأساسي
                    name: product.name,
                    description: product.description,
                    detailedDescription: product.detailedDescription,
                    price: selectedPrice, // سعر العنصر (بما في ذلك سعر الخيار المحدد)
                    baseProduct: product, // مرجع للمنتج الأصلي لاسترجاع خيارات المدة إذا لزم الأمر
                    quantity: 1,
                    duration: selectedDuration,
                    durationName: durationName,
                    isDurationBased: !!product.durationOptions
                });
                console.log("تم إضافة منتج جديد إلى السلة:", cart[cart.length - 1]);
            }
            
            updateCart(); // تحديث عرض السلة بعد الإضافة
            showCustomAlert("تمت إضافة الخدمة إلى باقتك!", 'success');
            toggleSidebarCart(); // فتح الشريط الجانبي للسلة بعد الإضافة
        }

        // تحديث حالة السلة في localStorage وإعادة عرضها
        function updateCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
            renderSidebarCart(); // إعادة عرض محتوى السلة الجانبية
            updateCartItemCount(); // تحديث عداد العناصر في النافبار
            console.log("تم تحديث السلة في localStorage:", cart);
        }

        // تحديث عداد العناصر في أيقونة السلة بالنافبار
        function updateCartItemCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            if (cartItemCountSpan) {
                cartItemCountSpan.textContent = count;
            } else {
                console.warn("عنصر عداد السلة (#cart-item-count) غير موجود.");
            }
        }

        // دالة لعرض محتوى سلة التسوق في الشريط الجانبي (إصلاح مشكلة عدم الظهور)
        function renderSidebarCart() {
            if (!sidebarCartItems) {
                console.error("عنصر عناصر السلة (#sidebar-cart-items) غير موجود.");
                return;
            }

            sidebarCartItems.innerHTML = ''; // مسح المحتوى الحالي للسلة قبل إعادة العرض
            let subtotal = 0;

            if (cart.length === 0) {
                emptySidebarCartMessage.classList.remove('hidden'); // إظهار رسالة السلة فارغة
            } else {
                emptySidebarCartMessage.classList.add('hidden'); // إخفاء رسالة السلة فارغة
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    subtotal += itemTotal;
                    
                    let durationInfo = '';
                    if (item.isDurationBased && item.durationName) {
                        durationInfo = `<span class="text-gray-500 text-sm"> (${item.durationName})</span>`;
                    }

                    const cartItemHtml = `
                        <div class="flex justify-between items-center py-3 border-b border-gray-200">
                            <div class="flex-grow">
                                <h4 class="font-semibold text-gray-800">${item.name}</h4>
                                <p class="text-sm text-gray-500">
                                    الكمية: 
                                    <input type="number" value="${item.quantity}" min="1" 
                                        onchange="updateCartItemQuantity('${item.cartId}', this.value)"
                                        class="w-12 text-center border border-gray-300 rounded-md inline-block ml-1 mr-1" />
                                    ${durationInfo}
                                </p>
                                <p class="text-sm text-gray-500">السعر للوحدة: ${item.price.toLocaleString()} جنيه</p>
                            </div>
                            <div class="flex items-center">
                                <span class="font-bold text-primary-dark ml-4">${itemTotal.toLocaleString()} جنيه</span>
                                <button onclick="removeProductFromCart('${item.cartId}')" class="text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50 transition" aria-label="Remove item from cart">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                    sidebarCartItems.insertAdjacentHTML('beforeend', cartItemHtml);
                });
            }

            const tax = subtotal * 0.10; // افتراض 10% ضريبة
            const grandTotal = subtotal + tax;

            if (sidebarSubtotal) sidebarSubtotal.textContent = subtotal.toLocaleString();
            if (sidebarTax) sidebarTax.textContent = tax.toLocaleString();
            if (sidebarGrandTotal) sidebarGrandTotal.textContent = grandTotal.toLocaleString();
            console.log("تم عرض محتوى السلة الجانبية. الإجمالي:", grandTotal);
        }

        // دالة لتحديث كمية عنصر معين في السلة
        function updateCartItemQuantity(cartId, newQuantity) {
            let quantity = parseInt(newQuantity);
            if (isNaN(quantity) || quantity < 1) quantity = 1; // التأكد من أن الكمية رقم صحيح وموجب

            const itemIndex = cart.findIndex(item => item.cartId === cartId);
            if (itemIndex > -1) {
                cart[itemIndex].quantity = quantity;
                updateCart(); // إعادة تحديث السلة بعد تغيير الكمية
                console.log(`تم تحديث كمية المنتج ${cartId} إلى ${quantity}`);
            }
        }

        // دالة لإزالة عنصر من السلة
        function removeProductFromCart(cartId) {
            cart = cart.filter(item => item.cartId !== cartId);
            updateCart(); // إعادة تحديث السلة بعد الإزالة
            showCustomAlert("تم حذف الخدمة من الباقة.", 'info');
            console.log(`تم حذف المنتج ${cartId} من السلة.`);
        }

        // دالة لإرسال طلب الباقة (تعبئة نموذج الاتصال بملخص الباقة)
        function sendPackageOrder() {
            if (cart.length === 0) {
                showCustomAlert("باقة الخدمات فارغة! يرجى إضافة خدمات قبل إرسال الطلب.", 'error');
                return;
            }

            let orderSummary = "أود طلب الباقة التالية:\n\n";
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                orderSummary += `- ${item.name} (الكمية: ${item.quantity}`;
                if (item.isDurationBased && item.durationName) {
                    orderSummary += `, الخيار: ${item.durationName}`;
                }
                orderSummary += `) - السعر الإجمالي لهذه الخدمة: ${itemTotal.toLocaleString()} جنيه\n`;
            });
            
            const subtotal = parseFloat(sidebarSubtotal.textContent.replace(/,/g, ''));
            const tax = parseFloat(sidebarTax.textContent.replace(/,/g, ''));
            const grandTotal = parseFloat(sidebarGrandTotal.textContent.replace(/,/g, ''));

            orderSummary += `\nالإجمالي الفرعي للباقة: ${subtotal.toLocaleString()} جنيه`;
            orderSummary += `\nالضريبة (10%): ${tax.toLocaleString()} جنيه`;
            orderSummary += `\nالمبلغ الكلي المستحق: ${grandTotal.toLocaleString()} جنيه`;
            orderSummary += `\n\nيرجى التواصل معي لاستكمال عملية الطلب وتأكيد التفاصيل.`;

            // إغلاق الشريط الجانبي للسلة ثم فتح نافذة نموذج الاتصال مع ملخص الطلب
            toggleSidebarCart(); 
            showContactFormModal(`طلب باقة خدمات مخصصة`, orderSummary);
            console.log("تم إعداد ملخص الطلب وفتح نموذج الاتصال.");
        }

        // دالة التنقل بين أقسام الصفحة (SPA Logic)
        function navigate(pageId, modalTitle = null, modalMessage = '') { 
            // إخفاء جميع أقسام الصفحة أولاً
            pages.forEach(id => {
                const pageElement = document.getElementById(id);
                if (pageElement) {
                    pageElement.classList.remove('active');
                    pageElement.style.display = 'none'; 
                }
            });

            // إظهار القسم المطلوب
            const activePage = document.getElementById(pageId);
            if (activePage) {
                activePage.classList.add('active');
                activePage.style.display = 'block'; 

                // استدعاء الدوال الخاصة بالقسم عند التنقل إليه
                if (pageId === 'package-builder-page') {
                    renderProducts('all'); 
                } else if (pageId === 'portfolio-page') {
                    renderCaseStudies();
                } else if (pageId === 'contact-page' && modalTitle && modalMessage) {
                    showContactFormModal(modalTitle, modalMessage);
                } else if (pageId === 'about-us-section' || pageId === 'services-page' || pageId === 'ai-content-editing-page') {
                    // لا توجد دالات عرض محددة لهذه الأقسام بخلاف وجودها في الـ HTML
                }
            } else {
                console.error(`الصفحة المطلوبة بالـ ID "${pageId}" غير موجودة.`);
            }

            // إغلاق قائمة الموبايل إذا كانت مفتوحة
            const navbarLinks = document.getElementById('navbar-links');
            const menuIconOpen = document.getElementById('menu-icon-open');
            const menuIconClose = document.getElementById('menu-icon-close');

            if (navbarLinks && navbarLinks.classList.contains('block')) {
                navbarLinks.classList.remove('block');
                navbarLinks.classList.add('hidden');
                if (menuIconOpen && menuIconClose) {
                    menuIconOpen.style.display = 'block';
                    menuIconClose.style.display = 'none';
                }
            }
            // التمرير لأعلى الصفحة دائماً عند التنقل بين الأقسام
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // معالجة زر قائمة الموبايل
        document.getElementById('mobile-menu-button').addEventListener('click', function() {
            const navbarLinks = document.getElementById('navbar-links');
            const menuIconOpen = document.getElementById('menu-icon-open');
            const menuIconClose = document.getElementById('menu-icon-close');

            if (navbarLinks.classList.contains('hidden')) {
                navbarLinks.classList.remove('hidden');
                navbarLinks.classList.add('block');
                if (menuIconOpen && menuIconClose) {
                    menuIconOpen.style.display = 'none';
                    menuIconClose.style.display = 'block';
                }
            } else {
                navbarLinks.classList.remove('block');
                navbarLinks.classList.add('hidden');
                if (menuIconOpen && menuIconClose) {
                    menuIconOpen.style.display = 'block';
                    menuIconClose.style.display = 'none';
                }
            }
        });

        // دالة لإظهار رسائل تنبيه مخصصة (بدلاً من alert())
        function showCustomAlert(message, type = 'info') {
            const alertBox = document.createElement('div');
            alertBox.className = `fixed bottom-4 right-4 p-4 rounded-lg shadow-lg text-white z-50 animate-fade-in-up`;
            
            let bgColor = '';
            switch (type) {
                case 'success': bgColor = 'bg-green-500'; break;
                case 'error': bgColor = 'bg-red-500'; break;
                case 'info': bgColor = 'bg-blue-500'; break;
                default: bgColor = 'bg-gray-700';
            }
            alertBox.classList.add(bgColor);
            alertBox.textContent = message;
            
            document.body.appendChild(alertBox);
            
            setTimeout(() => {
                alertBox.classList.remove('animate-fade-in-up');
                alertBox.classList.add('animate-fade-out-down'); // لإضافة تأثير الاختفاء
                // إزالة العنصر بعد انتهاء الأنييميشن لضمان سلاسة الانتقال
                alertBox.addEventListener('animationend', () => alertBox.remove());
            }, 3000); // إظهار التنبيه لمدة 3 ثواني
        }

        // منطق نافذة نموذج الاتصال المنبثقة
        const contactFormModal = document.getElementById('contact-form-modal');
        const modalContactForm = document.getElementById('modal-contact-form');
        const modalSubmitMessage = document.getElementById('modal-submit-message');
        const modalSubmitButton = document.getElementById('modal-submit-button');
        const modalTitleDynamic = document.getElementById('modal-title-dynamic');

        function showContactFormModal(title = 'اطلب استشارة مجانية', messageContent = '') {
            modalTitleDynamic.textContent = title;
            document.getElementById('modal-message').value = messageContent; // تعبئة الرسالة مسبقاً
            contactFormModal.style.display = 'flex';
            // إعادة تعيين النموذج (باستثناء الرسالة التي تم تعبئتها) وإعادة تعيين رسالة الإرسال
            modalContactForm.reset();
            document.getElementById('modal-message').value = messageContent; 
            modalSubmitMessage.textContent = '';
            modalSubmitMessage.className = 'text-center mt-4';
            modalSubmitButton.disabled = false;
            modalSubmitButton.textContent = 'إرسال الطلب';
        }

        function hideContactFormModal() {
            contactFormModal.style.display = 'none';
        }

        if (modalContactForm) {
            modalContactForm.addEventListener('submit', async function(event) {
                event.preventDefault();
                modalSubmitButton.disabled = true;
                modalSubmitButton.textContent = 'جاري الإرسال...';
                modalSubmitMessage.textContent = 'جاري الإرسال...';
                modalSubmitMessage.className = 'text-center mt-4 text-gray-600';

                // محاكاة استدعاء API لإرسال البيانات (في التطبيق الحقيقي، سترسل البيانات إلى خادم)
                await new Promise(resolve => setTimeout(resolve, 2000));

                console.log('بيانات النموذج المرسلة:', {
                    name: document.getElementById('modal-name').value,
                    email: document.getElementById('modal-email').value,
                    phone: document.getElementById('modal-phone').value,
                    message: document.getElementById('modal-message').value
                });

                modalSubmitMessage.textContent = 'تم استلام رسالتك بنجاح! سنتواصل معك قريبًا.';
                modalSubmitMessage.classList.add('text-green-600');
                modalSubmitButton.disabled = false;
                modalSubmitButton.textContent = 'إرسال الطلب';
                modalContactForm.reset(); // مسح النموذج بعد الإرسال
                document.getElementById('modal-message').value = ''; // التأكد من مسح الرسالة أيضاً

                setTimeout(() => {
                    hideContactFormModal();
                }, 3000);
            });
        }

        // منطق نموذج الاتصال الرئيسي في صفحة "اتصل بنا"
        const mainContactForm = document.getElementById('contact-form');
        const mainSubmitMessage = document.getElementById('contact-submit-message');
        const mainSubmitButton = document.getElementById('contact-submit-button');

        if (mainContactForm) {
            mainContactForm.addEventListener('submit', async function(event) {
                event.preventDefault();
                mainSubmitButton.disabled = true;
                mainSubmitButton.textContent = 'جاري الإرسال...';
                mainSubmitMessage.textContent = 'جاري الإرسال...';
                mainSubmitMessage.className = 'text-center mt-4 text-gray-600';

                // محاكاة استدعاء API
                await new Promise(resolve => setTimeout(resolve, 2000));

                console.log('بيانات النموذج المرسلة (من النموذج الرئيسي):', {
                    name: document.getElementById('contact-name').value,
                    email: document.getElementById('contact-email').value,
                    phone: document.getElementById('contact-phone').value,
                    message: document.getElementById('contact-message').value
                });

                mainSubmitMessage.textContent = 'تم استلام رسالتك بنجاح! سنتواصل معك قريبًا.';
                mainSubmitMessage.classList.add('text-green-600');
                mainSubmitButton.disabled = false;
                mainSubmitButton.textContent = 'إرسال الرسالة';
                mainContactForm.reset();
            });
        }

        // منطق صفحة دراسات الحالة / معرض الأعمال
        const portfolioGrid = document.getElementById('case-studies-grid');
        const caseStudyModal = document.getElementById('case-study-modal');
        let currentCaseStudy = null; // لتخزين بيانات دراسة الحالة المعروضة حالياً

        function renderCaseStudies() {
            if (portfolioGrid) {
                portfolioGrid.innerHTML = ''; // مسح المحتوى الحالي
                caseStudiesData.forEach(cs => {
                    const cardHtml = `
                        <div class="bg-white rounded-lg shadow-lg overflow-hidden transform transition duration-300 hover:scale-105 hover:shadow-xl cursor-pointer"
                             onclick="showCaseStudyModal(${cs.id})">
                            <img src="${cs.image}" alt="صورة مشروع ${cs.client}" class="w-full h-48 object-cover"/>
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-gray-800 mb-2">${cs.client} - ${cs.industry}</h3>
                                <p class="text-gray-600 text-sm">${cs.challenge.substring(0, 70)}...</p>
                                <span class="mt-4 text-primary-dark hover:underline inline-block">عرض التفاصيل</span>
                            </div>
                        </div>
                    `;
                    portfolioGrid.insertAdjacentHTML('beforeend', cardHtml);
                });
            } else {
                console.error("عنصر شبكة دراسات الحالة (#case-studies-grid) غير موجود.");
            }
        }

        function showCaseStudyModal(id) {
            const cs = caseStudiesData.find(item => item.id === id);
            if (cs) {
                currentCaseStudy = cs; // تعيين دراسة الحالة الحالية
                document.getElementById('modal-case-study-client').textContent = cs.client;
                document.getElementById('modal-case-study-industry').textContent = cs.industry;
                document.getElementById('modal-case-study-image').src = cs.image;
                document.getElementById('modal-case-study-challenge').textContent = cs.challenge;
                document.getElementById('modal-case-study-solution').textContent = cs.solution;
                document.getElementById('modal-case-study-results').textContent = cs.results;
                
                // إعادة تعيين قسم ملخص الذكاء الاصطناعي
                document.getElementById('ai-summary-output').classList.add('hidden');
                document.getElementById('ai-summary-text').textContent = '';
                document.getElementById('ai-summary-loading').classList.add('hidden');
                document.getElementById('generate-summary-button').disabled = false;
                document.getElementById('generate-summary-button').textContent = 'توليد ملخص النقاط الرئيسية ✨';

                caseStudyModal.style.display = 'flex';
            } else {
                console.error(`دراسة الحالة بالـ ID ${id} غير موجودة.`);
            }
        }

        function hideCaseStudyModal() {
            caseStudyModal.style.display = 'none';
            currentCaseStudy = null; // مسح دراسة الحالة الحالية
        }

        // منطق Gemini API لملخص دراسة الحالة
        async function generateCaseStudySummary() {
            if (!currentCaseStudy) return;

            const summaryOutput = document.getElementById('ai-summary-output');
            const summaryText = document.getElementById('ai-summary-text');
            const summaryLoading = document.getElementById('ai-summary-loading');
            const generateButton = document.getElementById('generate-summary-button');

            summaryOutput.classList.remove('hidden');
            summaryText.textContent = '';
            summaryLoading.classList.remove('hidden');
            generateButton.disabled = true;
            generateButton.textContent = 'جاري التوليد...';

            const prompt = `
            لخص دراسة الحالة التالية في 3 نقاط رئيسية، مع التركيز على التحدي، الحل، والنتائج القابلة للقياس:

            اسم العميل/الصناعة: ${currentCaseStudy.client} - ${currentCaseStudy.industry}
            التحدي: ${currentCaseStudy.challenge}
            الحل المقدم: ${currentCaseStudy.solution}
            النتائج: ${currentCaseStudy.results}

            النقاط الرئيسية:
            `;

            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };
            const apiKey = ""; // Canvas will inject API key at runtime
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    summaryText.textContent = text;
                } else {
                    summaryText.textContent = "عذراً، لم أتمكن من توليد الملخص. يرجى المحاولة مرة أخرى.";
                }
            } catch (error) {
                console.error("خطأ في استدعاء Gemini API:", error);
                summaryText.textContent = "حدث خطأ أثناء التواصل مع الذكاء الاصطناعي. يرجى التحقق من اتصالك بالإنترنت والمحاولة مرة أخرى.";
            } finally {
                summaryLoading.classList.add('hidden');
                generateButton.disabled = false;
                generateButton.textContent = 'توليد ملخص النقاط الرئيسية ✨';
            }
        }

        // منطق Gemini API لمولد أفكار المحتوى
        async function generateContentIdeas() {
            const contentTopicInput = document.getElementById('content-topic');
            const ideasOutput = document.getElementById('ai-content-ideas-output');
            const ideasText = document.getElementById('ai-ideas-text');
            const ideasLoading = document.getElementById('ai-ideas-loading');
            const generateButton = document.getElementById('generate-ideas-button');

            const topic = contentTopicInput.value.trim();
            if (!topic) {
                ideasOutput.classList.remove('hidden');
                ideasText.textContent = "الرجاء إدخال موضوع لتوليد الأفكار.";
                ideasOutput.classList.remove('bg-gray-50'); 
                ideasOutput.classList.add('bg-red-100', 'text-red-800'); 
                return;
            } else {
                ideasOutput.classList.remove('bg-red-100', 'text-red-800');
                ideasOutput.classList.add('bg-gray-50');
            }

            ideasOutput.classList.remove('hidden');
            ideasText.textContent = '';
            ideasLoading.classList.remove('hidden');
            generateButton.disabled = true;
            generateButton.textContent = 'جاري التوليد...';

            const prompt = `
            أنا أبحث عن أفكار محتوى مبتكرة وحصرية لموضوع: "${topic}" لشركة تسويق رقمي تستهدف السوق المصري.
            يرجى تزويدي بـ 5 عناوين مقترحة لمقالات/مدونات، أو أفكار لمحتوى فيديو، أو نقاط رئيسية لمحتوى طويل، مع التأكد من أنها جذابة وتتناول الموضوع بعمق وتناسب الثقافة المصرية.
            `;

            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };
            const apiKey = ""; // Canvas will inject API key at runtime
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    ideasText.textContent = text;
                } else {
                    ideasText.textContent = "عذراً، لم أتمكن من توليد الأفكار. يرجى المحاولة مرة أخرى.";
                }
            } catch (error) {
                console.error("خطأ في استدعاء Gemini API:", error);
                ideasText.textContent = "حدث خطأ أثناء التواصل مع الذكاء الاصطناعي. يرجى التحقق من اتصالك بالإنترنت والمحاولة مرة أخرى.";
            } finally {
                ideasLoading.classList.add('hidden');
                generateButton.disabled = false;
                generateButton.textContent = 'توليد الأفكار ✨';
            }
        }

        // دالة لتوسيع/طوي أقسام Accordion في صفحة الخدمات
        function toggleAccordion(header) {
            const content = header.nextElementSibling;
            const icon = header.querySelector('.icon');

            if (content.classList.contains('active')) {
                content.classList.remove('active');
                icon.classList.remove('rotate');
            } else {
                // إغلاق جميع الأقسام المفتوحة الأخرى لضمان قسم واحد مفتوح في كل مرة
                document.querySelectorAll('.accordion-content.active').forEach(item => {
                    item.classList.remove('active');
                    item.previousElementSibling.querySelector('.icon').classList.remove('rotate');
                });
                content.classList.add('active');
                icon.classList.add('rotate');
            }
        }

        // تعيين السنة الحالية في الفوتر
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // التهيئة الأولية عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', () => {
            navigate('home-page'); // التنقل إلى الصفحة الرئيسية افتراضياً عند التحميل
            updateCart(); // تحديث السلة عند التحميل لضمان عرض أي عناصر محفوظة في localStorage
        });
    </script>
</body>
</html>
